--[[
NatvieUI Lua 2.1.0 - Minified
	Original Git : https://github.com/FrazzIe/NativeUILua
	Minified: https://github.com/92jackson/NativeUILua-Mini
		17.12.22: Fixed LEFT and RIGHT navigation speed
]]--
UIResRectangle=setmetatable({},UIResRectangle)UIResRectangle.__index=UIResRectangle;UIResRectangle.__call=function()return"Rectangle"end;UIResText=setmetatable({},UIResText)UIResText.__index=UIResText;UIResText.__call=function()return"Text"end;Sprite=setmetatable({},Sprite)Sprite.__index=Sprite;Sprite.__call=function()return"Sprite"end;UIMenuItem=setmetatable({},UIMenuItem)UIMenuItem.__index=UIMenuItem;UIMenuItem.__call=function()return"UIMenuItem","UIMenuItem"end;UIMenuCheckboxItem=setmetatable({},UIMenuCheckboxItem)UIMenuCheckboxItem.__index=UIMenuCheckboxItem;UIMenuCheckboxItem.__call=function()return"UIMenuItem","UIMenuCheckboxItem"end;UIMenuListItem=setmetatable({},UIMenuListItem)UIMenuListItem.__index=UIMenuListItem;UIMenuListItem.__call=function()return"UIMenuItem","UIMenuListItem"end;UIMenuSliderItem=setmetatable({},UIMenuSliderItem)UIMenuSliderItem.__index=UIMenuSliderItem;UIMenuSliderItem.__call=function()return"UIMenuItem","UIMenuSliderItem"end;UIMenuColouredItem=setmetatable({},UIMenuColouredItem)UIMenuColouredItem.__index=UIMenuColouredItem;UIMenuColouredItem.__call=function()return"UIMenuItem","UIMenuColouredItem"end;UIMenuProgressItem=setmetatable({},UIMenuProgressItem)UIMenuProgressItem.__index=UIMenuProgressItem;UIMenuProgressItem.__call=function()return"UIMenuItem","UIMenuProgressItem"end;UIMenuHeritageWindow=setmetatable({},UIMenuHeritageWindow)UIMenuHeritageWindow.__index=UIMenuHeritageWindow;UIMenuHeritageWindow.__call=function()return"UIMenuWindow","UIMenuHeritageWindow"end;UIMenuGridPanel=setmetatable({},UIMenuGridPanel)UIMenuGridPanel.__index=UIMenuGridPanel;UIMenuGridPanel.__call=function()return"UIMenuPanel","UIMenuGridPanel"end;UIMenuColourPanel=setmetatable({},UIMenuColourPanel)UIMenuColourPanel.__index=UIMenuColourPanel;UIMenuColourPanel.__call=function()return"UIMenuPanel","UIMenuColourPanel"end;UIMenuPercentagePanel=setmetatable({},UIMenuPercentagePanel)UIMenuPercentagePanel.__index=UIMenuPercentagePanel;UIMenuPercentagePanel.__call=function()return"UIMenuPanel","UIMenuPercentagePanel"end;UIMenu=setmetatable({},UIMenu)UIMenu.__index=UIMenu;UIMenu.__call=function()return"UIMenu"end;MenuPool=setmetatable({},MenuPool)MenuPool.__index=MenuPool;NativeUI={}CharacterMap={[' ']=6,['!']=6,['"']=6,['#']=11,['$']=10,['%']=17,['&']=13,['\\']=4,['(']=6,[')']=6,['*']=7,['+']=10,[',']=4,['-']=6,['.']=4,['/']=7,['0']=12,['1']=7,['2']=11,['3']=11,['4']=11,['5']=11,['6']=12,['7']=10,['8']=11,['9']=11,[':']=5,[';']=4,['<']=9,['=']=9,['>']=9,['?']=10,['@']=15,['A']=12,['B']=13,['C']=14,['D']=14,['E']=12,['F']=12,['G']=15,['H']=14,['I']=5,['J']=11,['K']=13,['L']=11,['M']=16,['N']=14,['O']=16,['P']=12,['Q']=15,['R']=13,['S']=12,['T']=11,['U']=13,['V']=12,['W']=18,['X']=11,['Y']=11,['Z']=12,['[']=6,[']']=6,['^']=9,['_']=18,['`']=8,['a']=11,['b']=12,['c']=11,['d']=12,['e']=12,['f']=5,['g']=13,['h']=11,['i']=4,['j']=4,['k']=10,['l']=4,['m']=18,['n']=11,['o']=12,['p']=12,['q']=12,['r']=7,['s']=9,['t']=5,['u']=11,['v']=10,['w']=14,['x']=9,['y']=10,['z']=9,['{']=6,['|']=3,['}']=6}BadgeStyle={None=0,BronzeMedal=1,GoldMedal=2,SilverMedal=3,Alert=4,Crown=5,Ammo=6,Armour=7,Barber=8,Clothes=9,Franklin=10,Bike=11,Car=12,Gun=13,Heart=14,Makeup=15,Mask=16,Michael=17,Star=18,Tattoo=19,Trevor=20,Lock=21,Tick=22}BadgeTexture={[0]=function()return""end,[1]=function()return"mp_medal_bronze"end,[2]=function()return"mp_medal_gold"end,[3]=function()return"medal_silver"end,[4]=function()return"mp_alerttriangle"end,[5]=function()return"mp_hostcrown"end,[6]=function(a)if a then return"shop_ammo_icon_b"else return"shop_ammo_icon_a"end end,[7]=function(a)if a then return"shop_armour_icon_b"else return"shop_armour_icon_a"end end,[8]=function(a)if a then return"shop_barber_icon_b"else return"shop_barber_icon_a"end end,[9]=function(a)if a then return"shop_clothing_icon_b"else return"shop_clothing_icon_a"end end,[10]=function(a)if a then return"shop_franklin_icon_b"else return"shop_franklin_icon_a"end end,[11]=function(a)if a then return"shop_garage_bike_icon_b"else return"shop_garage_bike_icon_a"end end,[12]=function(a)if a then return"shop_garage_icon_b"else return"shop_garage_icon_a"end end,[13]=function(a)if a then return"shop_gunclub_icon_b"else return"shop_gunclub_icon_a"end end,[14]=function(a)if a then return"shop_health_icon_b"else return"shop_health_icon_a"end end,[15]=function(a)if a then return"shop_makeup_icon_b"else return"shop_makeup_icon_a"end end,[16]=function(a)if a then return"shop_mask_icon_b"else return"shop_mask_icon_a"end end,[17]=function(a)if a then return"shop_michael_icon_b"else return"shop_michael_icon_a"end end,[18]=function()return"shop_new_star"end,[19]=function(a)if a then return"shop_tattoos_icon_b"else return"shop_tattoos_icon_a"end end,[20]=function(a)if a then return"shop_trevor_icon_b"else return"shop_trevor_icon_a"end end,[21]=function()return"shop_lock"end,[22]=function()return"shop_tick_icon"end}BadgeDictionary={[0]=function(a)if a then return"commonmenu"else return"commonmenu"end end}BadgeColour={[5]=function(a)if a then return 0,0,0,255 else return 255,255,255,255 end end,[21]=function(a)if a then return 0,0,0,255 else return 255,255,255,255 end end,[22]=function(a)if a then return 0,0,0,255 else return 255,255,255,255 end end}Colours={PureWhite={255,255,255,255},White={240,240,240,255},Black={0,0,0,255},Grey={155,155,155,255},GreyLight={205,205,205,255},GreyDark={77,77,77,255},Red={224,50,50,255},RedLight={240,153,153,255},RedDark={112,25,25,255},Blue={93,182,229,255},BlueLight={174,219,242,255},BlueDark={47,92,115,255},Yellow={240,200,80,255},YellowLight={254,235,169,255},YellowDark={126,107,41,255},Orange={255,133,85,255},OrangeLight={255,194,170,255},OrangeDark={127,66,42,255},Green={114,204,114,255},GreenLight={185,230,185,255},GreenDark={57,102,57,255},Purple={132,102,226,255},PurpleLight={192,179,239,255},PurpleDark={67,57,111,255},Pink={203,54,148,255},RadarHealth={53,154,71,255},RadarArmour={93,182,229,255},RadarDamage={235,36,39,255},NetPlayer1={194,80,80,255},NetPlayer2={156,110,175,255},NetPlayer3={255,123,196,255},NetPlayer4={247,159,123,255},NetPlayer5={178,144,132,255},NetPlayer6={141,206,167,255},NetPlayer7={113,169,175,255},NetPlayer8={211,209,231,255},NetPlayer9={144,127,153,255},NetPlayer10={106,196,191,255},NetPlayer11={214,196,153,255},NetPlayer12={234,142,80,255},NetPlayer13={152,203,234,255},NetPlayer14={178,98,135,255},NetPlayer15={144,142,122,255},NetPlayer16={166,117,94,255},NetPlayer17={175,168,168,255},NetPlayer18={232,142,155,255},NetPlayer19={187,214,91,255},NetPlayer20={12,123,86,255},NetPlayer21={123,196,255,255},NetPlayer22={171,60,230,255},NetPlayer23={206,169,13,255},NetPlayer24={71,99,173,255},NetPlayer25={42,166,185,255},NetPlayer26={186,157,125,255},NetPlayer27={201,225,255,255},NetPlayer28={240,240,150,255},NetPlayer29={237,140,161,255},NetPlayer30={249,138,138,255},NetPlayer31={252,239,166,255},NetPlayer32={240,240,240,255},SimpleBlipDefault={159,201,166,255},MenuBlue={140,140,140,255},MenuGreyLight={140,140,140,255},MenuBlueExtraDark={40,40,40,255},MenuYellow={240,160,0,255},MenuYellowDark={240,160,0,255},MenuGreen={240,160,0,255},MenuGrey={140,140,140,255},MenuGreyDark={60,60,60,255},MenuHighlight={30,30,30,255},MenuStandard={140,140,140,255},MenuDimmed={75,75,75,255},MenuExtraDimmed={50,50,50,255},BriefTitle={95,95,95,255},MidGreyMp={100,100,100,255},NetPlayer1Dark={93,39,39,255},NetPlayer2Dark={77,55,89,255},NetPlayer3Dark={124,62,99,255},NetPlayer4Dark={120,80,80,255},NetPlayer5Dark={87,72,66,255},NetPlayer6Dark={74,103,83,255},NetPlayer7Dark={60,85,88,255},NetPlayer8Dark={105,105,64,255},NetPlayer9Dark={72,63,76,255},NetPlayer10Dark={53,98,95,255},NetPlayer11Dark={107,98,76,255},NetPlayer12Dark={117,71,40,255},NetPlayer13Dark={76,101,117,255},NetPlayer14Dark={65,35,47,255},NetPlayer15Dark={72,71,61,255},NetPlayer16Dark={85,58,47,255},NetPlayer17Dark={87,84,84,255},NetPlayer18Dark={116,71,77,255},NetPlayer19Dark={93,107,45,255},NetPlayer20Dark={6,61,43,255},NetPlayer21Dark={61,98,127,255},NetPlayer22Dark={85,30,115,255},NetPlayer23Dark={103,84,6,255},NetPlayer24Dark={35,49,86,255},NetPlayer25Dark={21,83,92,255},NetPlayer26Dark={93,98,62,255},NetPlayer27Dark={100,112,127,255},NetPlayer28Dark={120,120,75,255},NetPlayer29Dark={152,76,93,255},NetPlayer30Dark={124,69,69,255},NetPlayer31Dark={10,43,50,255},NetPlayer32Dark={95,95,10,255},Bronze={180,130,97,255},Silver={150,153,161,255},Gold={214,181,99,255},Platinum={166,221,190,255},Gang1={29,100,153,255},Gang2={214,116,15,255},Gang3={135,125,142,255},Gang4={229,119,185,255},SameCrew={252,239,166,255},Freemode={45,110,185,255},PauseBg={0,0,0,255},Friendly={93,182,229,255},Enemy={194,80,80,255},Location={240,200,80,255},Pickup={114,204,114,255},PauseSingleplayer={114,204,114,255},FreemodeDark={22,55,92,255},InactiveMission={154,154,154,255},Damage={194,80,80,255},PinkLight={252,115,201,255},PmMitemHighlight={252,177,49,255},ScriptVariable={0,0,0,255},Yoga={109,247,204,255},Tennis={241,101,34,255},Golf={214,189,97,255},ShootingRange={112,25,25,255},FlightSchool={47,92,115,255},NorthBlue={93,182,229,255},SocialClub={234,153,28,255},PlatformBlue={11,55,123,255},PlatformGreen={146,200,62,255},PlatformGrey={234,153,28,255},FacebookBlue={66,89,148,255},IngameBg={0,0,0,255},Darts={114,204,114,255},Waypoint={164,76,242,255},Michael={101,180,212,255},Franklin={171,237,171,255},Trevor={255,163,87,255},GolfP1={240,240,240,255},GolfP2={235,239,30,255},GolfP3={255,149,14,255},GolfP4={246,60,161,255},WaypointLight={210,166,249,255},WaypointDark={82,38,121,255},PanelLight={0,0,0,255},MichaelDark={72,103,116,255},FranklinDark={85,118,85,255},TrevorDark={127,81,43,255},ObjectiveRoute={240,200,80,255},PausemapTint={0,0,0,255},PauseDeselect={100,100,100,255},PmWeaponsPurchasable={45,110,185,255},PmWeaponsLocked={240,240,240,255},ScreenBg={0,0,0,255},Chop={224,50,50,255},PausemapTintHalf={0,0,0,255},NorthBlueOfficial={0,71,133,255},ScriptVariable2={0,0,0,255},H={33,118,37,255},HDark={37,102,40,255},T={234,153,28,255},TDark={225,140,8,255},HShard={20,40,0,255},ControllerMichael={48,255,255,255},ControllerFranklin={48,255,0,255},ControllerTrevor={176,80,0,255},ControllerChop={127,0,0,255},VideoEditorVideo={53,166,224,255},VideoEditorAudio={162,79,157,255},VideoEditorText={104,192,141,255},HbBlue={29,100,153,255},HbYellow={234,153,28,255},VideoEditorScore={240,160,1,255},VideoEditorAudioFadeout={59,34,57,255},VideoEditorTextFadeout={41,68,53,255},VideoEditorScoreFadeout={82,58,10,255},HeistBackground={37,102,40,255},VideoEditorAmbient={240,200,80,255},VideoEditorAmbientFadeout={80,70,34,255},Gb={255,133,85,255},G={255,194,170,255},B={255,133,85,255},LowFlow={240,200,80,255},LowFlowDark={126,107,41,255},G1={247,159,123,255},G2={226,134,187,255},G3={239,238,151,255},G4={113,169,175,255},G5={160,140,193,255},G6={141,206,167,255},G7={181,214,234,255},G8={178,144,132,255},G9={0,132,114,255},G10={216,85,117,255},G11={30,100,152,255},G12={43,181,117,255},G13={233,141,79,255},G14={137,210,215,255},G15={134,125,141,255},Adversary={109,34,33,255},DegenRed={255,0,0,255},DegenYellow={255,255,0,255},DegenGreen={0,255,0,255},DegenCyan={0,255,255,255},DegenBlue={0,0,255,255},DegenMagenta={255,0,255,255},Stunt1={38,136,234,255},Stunt2={224,50,50,255}}function GetResolution()local b,c=GetActiveScreenResolution()if b/c>3.5 then return GetScreenResolution()else return b,c end end;function FormatXWYH(d,e)return d/1920,e/1080 end;function math.round(f,g)return tonumber(string.format("%."..(g or 0).."f",f))end;function tobool(h)if h=="true"or tonumber(h)==1 or h==true then return true else return false end end;function string.split(j,k)if k==nil then k="%s"end;local l={}i=1;for m in string.gmatch(j,"([^"..k.."]+)")do l[i]=m;i=i+1 end;return l end;function string.starts(n,o)return string.sub(n,1,string.len(o))==o end;function IsMouseInBounds(p,q,r,s)local t,u=math.round(GetControlNormal(0,239)*1920),math.round(GetControlNormal(0,240)*1080)t,u=FormatXWYH(t,u)p,q=FormatXWYH(p,q)r,s=FormatXWYH(r,s)return t>=p and t<=p+r and(u>q and u<q+s)end;function GetSafeZoneBounds()local v=GetSafeZoneSize()v=math.round(v,2)v=v*100-90;v=10-v;local b,c=1920,1080;return{X=math.round(v*b/c*5.4),Y=math.round(v*5.4)}end;function Controller()return not IsInputDisabled(2)end;function UIResRectangle.New(p,q,r,s,w,x,y,z)local A={X=tonumber(p)or 0,Y=tonumber(q)or 0,Width=tonumber(r)or 0,Height=tonumber(s)or 0,_Colour={R=tonumber(w)or 255,G=tonumber(x)or 255,B=tonumber(y)or 255,A=tonumber(z)or 255}}return setmetatable(A,UIResRectangle)end;function UIResRectangle:Position(p,q)if tonumber(p)and tonumber(q)then self.X=tonumber(p)self.Y=tonumber(q)else return{X=self.X,Y=self.Y}end end;function UIResRectangle:Size(r,s)if tonumber(r)and tonumber(s)then self.Width=tonumber(r)self.Height=tonumber(s)else return{Width=self.Width,Height=self.Height}end end;function UIResRectangle:Colour(w,x,y,z)if tonumber(w)or tonumber(x)or tonumber(y)or tonumber(z)then self._Colour.R=tonumber(w)or 255;self._Colour.B=tonumber(y)or 255;self._Colour.G=tonumber(x)or 255;self._Colour.A=tonumber(z)or 255 else return self._Colour end end;function UIResRectangle:Draw()local B=self:Position()local C=self:Size()C.Width,C.Height=FormatXWYH(C.Width,C.Height)B.X,B.Y=FormatXWYH(B.X,B.Y)DrawRect(B.X+C.Width*0.5,B.Y+C.Height*0.5,C.Width,C.Height,self._Colour.R,self._Colour.G,self._Colour.B,self._Colour.A)end;function DrawRectangle(p,q,r,s,w,x,y,z)p,q,r,s=p or 0,q or 0,r or 0,s or 0;p,q=FormatXWYH(p,q)r,s=FormatXWYH(r,s)DrawRect(p+r*0.5,q+s*0.5,r,s,tonumber(w)or 255,tonumber(x)or 255,tonumber(y)or 255,tonumber(z)or 255)end;function GetCharacterCount(m)local D=0;for E in m:gmatch("[%z\1-\127\194-\244][\128-\191]*")do local F=E:byte(1,-1)if F~=nil then D=D+1 end end;return D end;function GetByteCount(m)local G=0;for E in m:gmatch("[%z\1-\127\194-\244][\128-\191]*")do local F,H,E,I=E:byte(1,-1)if F~=nil then G=G+1 end;if H~=nil then G=G+1 end;if E~=nil then G=G+1 end;if I~=nil then G=G+1 end end;return G end;function AddLongStringForAscii(m)local J=99;for i=0,GetCharacterCount(m),99 do AddTextComponentSubstringPlayerName(string.sub(m,i,math.min(J,GetCharacterCount(m)-i)))end end;function AddLongStringForUtf8(m)local J=99;local K=GetByteCount(m)if K<J then AddTextComponentSubstringPlayerName(m)return end;local L=0;for i=0,GetCharacterCount(m),1 do local M=i-L;if GetByteCount(string.sub(m,L,M))>J then AddTextComponentSubstringPlayerName(string.sub(m,L,M-1))i=i-1;L=L+M-1 end end;AddTextComponentSubstringPlayerName(string.sub(m,L,GetCharacterCount(m)-L))end;function AddLongString(m)local K=GetByteCount(m)if K==GetCharacterCount(m)then AddLongStringForAscii(m)else AddLongStringForUtf8(m)end end;function MeasureStringWidthNoConvert(m,N,O)BeginTextCommandWidth("STRING")AddLongString(m)SetTextFont(N or 0)SetTextScale(1.0,O or 0)return EndTextCommandGetWidth(true)end;function MeasureStringWidth(m,N,O)return MeasureStringWidthNoConvert(m,N,O)*1920 end;function UIResText.New(P,p,q,Q,w,x,y,z,R,S,T,U,V)local W={_Text=tostring(P)or"",X=tonumber(p)or 0,Y=tonumber(q)or 0,Scale=tonumber(Q)or 0,_Colour={R=tonumber(w)or 255,G=tonumber(x)or 255,B=tonumber(y)or 255,A=tonumber(z)or 255},Font=tonumber(R)or 0,Alignment=S or nil,DropShadow=Dropshadow or nil,Outline=U or nil,WordWrap=tonumber(V)or 0}return setmetatable(W,UIResText)end;function UIResText:Position(p,q)if tonumber(p)and tonumber(q)then self.X=tonumber(p)self.Y=tonumber(q)else return{X=self.X,Y=self.Y}end end;function UIResText:Colour(w,x,y,z)if tonumber(w)and tonumber(x)and tonumber(y)and tonumber(z)then self._Colour.R=tonumber(w)self._Colour.B=tonumber(y)self._Colour.G=tonumber(x)self._Colour.A=tonumber(z)else return self._Colour end end;function UIResText:Text(P)if tostring(P)and P~=nil then self._Text=tostring(P)else return self._Text end end;function UIResText:Draw()local B=self:Position()B.X,B.Y=FormatXWYH(B.X,B.Y)SetTextFont(self.Font)SetTextScale(1.0,self.Scale)SetTextColour(self._Colour.R,self._Colour.G,self._Colour.B,self._Colour.A)if self.DropShadow then SetTextDropShadow()end;if self.Outline then SetTextOutline()end;if self.Alignment~=nil then if self.Alignment==1 or self.Alignment=="Center"or self.Alignment=="Centre"then SetTextCentre(true)elseif self.Alignment==2 or self.Alignment=="Right"then SetTextRightJustify(true)SetTextWrap(0,B.X)end end;if tonumber(self.WordWrap)then if tonumber(self.WordWrap)~=0 then SetTextWrap(B.X,B.X+tonumber(self.WordWrap)/Resolution.Width)end end;BeginTextCommandDisplayText("STRING")AddLongString(self._Text)EndTextCommandDisplayText(B.X,B.Y)end;function RenderText(P,p,q,R,Q,w,x,y,z,S,T,U,V)P=tostring(P)p,q=FormatXWYH(p,q)SetTextFont(R or 0)SetTextScale(1.0,Q or 0)SetTextColour(w or 255,x or 255,y or 255,z or 255)if T then SetTextDropShadow()end;if U then SetTextOutline()end;if S~=nil then if S==1 or S=="Center"or S=="Centre"then SetTextCentre(true)elseif S==2 or S=="Right"then SetTextRightJustify(true)SetTextWrap(0,p)end end;if tonumber(V)then if tonumber(V)~=0 then V,_=FormatXWYH(V,0)SetTextWrap(V,p-V)end end;BeginTextCommandDisplayText("STRING")AddLongString(P)EndTextCommandDisplayText(p,q)end;function Sprite.New(X,Y,p,q,r,s,Z,w,x,y,z)local a0={TxtDictionary=tostring(X),TxtName=tostring(Y),X=tonumber(p)or 0,Y=tonumber(q)or 0,Width=tonumber(r)or 0,Height=tonumber(s)or 0,Heading=tonumber(Z)or 0,_Colour={R=tonumber(w)or 255,G=tonumber(x)or 255,B=tonumber(y)or 255,A=tonumber(z)or 255}}return setmetatable(a0,Sprite)end;function Sprite:Position(p,q)if tonumber(p)and tonumber(q)then self.X=tonumber(p)self.Y=tonumber(q)else return{X=self.X,Y=self.Y}end end;function Sprite:Size(r,s)if tonumber(r)and tonumber(r)then self.Width=tonumber(r)self.Height=tonumber(s)else return{Width=self.Width,Height=self.Height}end end;function Sprite:Colour(w,x,y,z)if tonumber(w)or tonumber(x)or tonumber(y)or tonumber(z)then self._Colour.R=tonumber(w)or 255;self._Colour.B=tonumber(y)or 255;self._Colour.G=tonumber(x)or 255;self._Colour.A=tonumber(z)or 255 else return self._Colour end end;function Sprite:Draw()if not HasStreamedTextureDictLoaded(self.TxtDictionary)then RequestStreamedTextureDict(self.TxtDictionary,true)end;local B=self:Position()local C=self:Size()C.Width,C.Height=FormatXWYH(C.Width,C.Height)B.X,B.Y=FormatXWYH(B.X,B.Y)DrawSprite(self.TxtDictionary,self.TxtName,B.X+C.Width*0.5,B.Y+C.Height*0.5,C.Width,C.Height,self.Heading,self._Colour.R,self._Colour.G,self._Colour.B,self._Colour.A)end;function DrawTexture(X,Y,p,q,r,s,Z,w,x,y,z)if not HasStreamedTextureDictLoaded(tostring(X)or"")then RequestStreamedTextureDict(tostring(X)or"",true)end;p,q,r,s=p or 0,q or 0,r or 0,s or 0;p,q=FormatXWYH(p,q)r,s=FormatXWYH(r,s)DrawSprite(tostring(X)or"",tostring(Y)or"",p+r*0.5,q+s*0.5,r,s,tonumber(Z)or 0,tonumber(w)or 255,tonumber(x)or 255,tonumber(y)or 255,tonumber(z)or 255)end;function MeasureString(m)local a1=0;for i=1,GetCharacterCount(m),1 do if CharacterMap[string.sub(m,i,i)]then a1=a1+CharacterMap[string.sub(m,i,i)]+1 end end;return a1 end;function GetBadgeTexture(a2,a)if BadgeTexture[a2]then return BadgeTexture[a2](a)else return""end end;function GetBadgeDictionary(a2,a)if BadgeDictionary[a2]then return BadgeDictionary[a2](a)else return"commonmenu"end end;function GetBadgeColour(a2,a)if BadgeColour[a2]then return BadgeColour[a2](a)else return 255,255,255,255 end end;function UIMenuItem.New(P,a3)_UIMenuItem={Rectangle=UIResRectangle.New(0,0,431,38,255,255,255,20),Text=UIResText.New(tostring(P)or"",8,0,0.33,245,245,245,255,0),_Description=tostring(a3)or"",SelectedSprite=Sprite.New("commonmenu","gradient_nav",0,0,431,38),LeftBadge={Sprite=Sprite.New("commonmenu","",0,0,40,40),Badge=0},RightBadge={Sprite=Sprite.New("commonmenu","",0,0,40,40),Badge=0},Label={Text=UIResText.New("",0,0,0.35,245,245,245,255,0,"Right"),MainColour={R=255,G=255,B=255,A=255},HighlightColour={R=0,G=0,B=0,A=255}},_Selected=false,_Hovered=false,_Enabled=true,_Offset={X=0,Y=0},ParentMenu=nil,Panels={},Activated=function(a4,a5,a6)end,ActivatedPanel=function(a4,a5,a7,a8)end}return setmetatable(_UIMenuItem,UIMenuItem)end;function UIMenuItem:SetParentMenu(a9)if a9~=nil and a9()=="UIMenu"then self.ParentMenu=a9 else return self.ParentMenu end end;function UIMenuItem:Selected(aa)if aa~=nil then self._Selected=tobool(aa)else return self._Selected end end;function UIMenuItem:Hovered(aa)if aa~=nil then self._Hovered=tobool(aa)else return self._Hovered end end;function UIMenuItem:Enabled(aa)if aa~=nil then self._Enabled=tobool(aa)else return self._Enabled end end;function UIMenuItem:Description(m)if tostring(m)and m~=nil then self._Description=tostring(m)else return self._Description end end;function UIMenuItem:Offset(p,q)if tonumber(p)or tonumber(q)then if tonumber(p)then self._Offset.X=tonumber(p)end;if tonumber(q)then self._Offset.Y=tonumber(q)end else return self._Offset end end;function UIMenuItem:Position(q)if tonumber(q)then self.Rectangle:Position(self._Offset.X,q+144+self._Offset.Y)self.SelectedSprite:Position(0+self._Offset.X,q+144+self._Offset.Y)self.Text:Position(8+self._Offset.X,q+147+self._Offset.Y)self.LeftBadge.Sprite:Position(0+self._Offset.X,q+142+self._Offset.Y)self.RightBadge.Sprite:Position(385+self._Offset.X,q+142+self._Offset.Y)self.Label.Text:Position(420+self._Offset.X,q+148+self._Offset.Y)end end;function UIMenuItem:RightLabel(P,ab,ac)if tostring(P)and P~=nil then if type(ab)=="table"then self.Label.MainColour=ab end;if type(ac)=="table"then self.Label.HighlightColour=ac end;self.Label.Text:Text(tostring(P))else return self.Label.Text:Text()end end;function UIMenuItem:SetLeftBadge(a2)if tonumber(a2)then self.LeftBadge.Badge=tonumber(a2)end end;function UIMenuItem:SetRightBadge(a2)if tonumber(a2)then self.RightBadge.Badge=tonumber(a2)end end;function UIMenuItem:Text(P)if tostring(P)and P~=nil then self.Text:Text(tostring(P))else return self.Text:Text()end end;function UIMenuItem:AddPanel(ad)if ad()=="UIMenuPanel"then table.insert(self.Panels,ad)ad:SetParentItem(self)end end;function UIMenuItem:RemovePanelAt(ae)if tonumber(ae)then if self.Panels[ae]then table.remove(self.Panels,tonumber(ae))end end end;function UIMenuItem:FindPanelIndex(ad)if ad()=="UIMenuPanel"then for ae=1,#self.Panels do if self.Panels[ae]==ad then return ae end end end;return nil end;function UIMenuItem:FindPanelItem()for ae=#self.Items,1,-1 do if self.Items[ae].Panel then return ae end end;return nil end;function UIMenuItem:Draw()self.Rectangle:Size(431+self.ParentMenu.WidthOffset,self.Rectangle.Height)self.SelectedSprite:Size(431+self.ParentMenu.WidthOffset,self.SelectedSprite.Height)if self._Hovered and not self._Selected then self.Rectangle:Draw()end;if self._Selected then self.SelectedSprite:Draw()end;if self._Enabled then if self._Selected then self.Text:Colour(0,0,0,255)self.Label.Text:Colour(self.Label.HighlightColour.R,self.Label.HighlightColour.G,self.Label.HighlightColour.B,self.Label.HighlightColour.A)else self.Text:Colour(245,245,245,255)self.Label.Text:Colour(self.Label.MainColour.R,self.Label.MainColour.G,self.Label.MainColour.B,self.Label.MainColour.A)end else self.Text:Colour(163,159,148,255)self.Label.Text:Colour(163,159,148,255)end;if self.LeftBadge.Badge==BadgeStyle.None then self.Text:Position(8+self._Offset.X,self.Text.Y)else self.Text:Position(35+self._Offset.X,self.Text.Y)self.LeftBadge.Sprite.TxtDictionary=GetBadgeDictionary(self.LeftBadge.Badge,self._Selected)self.LeftBadge.Sprite.TxtName=GetBadgeTexture(self.LeftBadge.Badge,self._Selected)self.LeftBadge.Sprite:Colour(GetBadgeColour(self.LeftBadge.Badge,self._Selected))self.LeftBadge.Sprite:Draw()end;if self.RightBadge.Badge~=BadgeStyle.None then self.RightBadge.Sprite:Position(385+self._Offset.X+self.ParentMenu.WidthOffset,self.RightBadge.Sprite.Y)self.RightBadge.Sprite.TxtDictionary=GetBadgeDictionary(self.RightBadge.Badge,self._Selected)self.RightBadge.Sprite.TxtName=GetBadgeTexture(self.RightBadge.Badge,self._Selected)self.RightBadge.Sprite:Colour(GetBadgeColour(self.RightBadge.Badge,self._Selected))self.RightBadge.Sprite:Draw()end;if self.Label.Text:Text()~=""and string.len(self.Label.Text:Text())>0 then self.Label.Text:Position(420+self._Offset.X+self.ParentMenu.WidthOffset,self.Label.Text.Y)self.Label.Text:Draw()end;self.Text:Draw()end;function UIMenuCheckboxItem.New(P,af,a3)local ag={Base=UIMenuItem.New(P or"",a3 or""),CheckedSprite=Sprite.New("commonmenu","shop_box_blank",410,95,50,50),Checked=tobool(af),CheckboxEvent=function(a4,a5,ah)end}return setmetatable(ag,UIMenuCheckboxItem)end;function UIMenuCheckboxItem:SetParentMenu(a9)if a9()=="UIMenu"then self.Base.ParentMenu=a9 else return self.Base.ParentMenu end end;function UIMenuCheckboxItem:Position(q)if tonumber(q)then self.Base:Position(q)self.CheckedSprite:Position(380+self.Base._Offset.X+self.Base.ParentMenu.WidthOffset,q+138+self.Base._Offset.Y)end end;function UIMenuCheckboxItem:Selected(aa)if aa~=nil then self.Base._Selected=tobool(aa)else return self.Base._Selected end end;function UIMenuCheckboxItem:Hovered(aa)if aa~=nil then self.Base._Hovered=tobool(aa)else return self.Base._Hovered end end;function UIMenuCheckboxItem:Enabled(aa)if aa~=nil then self.Base._Enabled=tobool(aa)else return self.Base._Enabled end end;function UIMenuCheckboxItem:Description(m)if tostring(m)and m~=nil then self.Base._Description=tostring(m)else return self.Base._Description end end;function UIMenuCheckboxItem:Offset(p,q)if tonumber(p)or tonumber(q)then if tonumber(p)then self.Base._Offset.X=tonumber(p)end;if tonumber(q)then self.Base._Offset.Y=tonumber(q)end else return self.Base._Offset end end;function UIMenuCheckboxItem:Text(P)if tostring(P)and P~=nil then self.Base.Text:Text(tostring(P))else return self.Base.Text:Text()end end;function UIMenuCheckboxItem:SetLeftBadge()error("This item does not support badges")end;function UIMenuCheckboxItem:SetRightBadge()error("This item does not support badges")end;function UIMenuCheckboxItem:RightLabel()error("This item does not support a right label")end;function UIMenuCheckboxItem:Draw()self.Base:Draw()self.CheckedSprite:Position(380+self.Base._Offset.X+self.Base.ParentMenu.WidthOffset,self.CheckedSprite.Y)if self.Base:Selected()then if self.Checked then self.CheckedSprite.TxtName="shop_box_tickb"else self.CheckedSprite.TxtName="shop_box_blankb"end else if self.Checked then self.CheckedSprite.TxtName="shop_box_tick"else self.CheckedSprite.TxtName="shop_box_blank"end end;self.CheckedSprite:Draw()end;function UIMenuListItem.New(P,ai,ae,a3)if type(ai)~="table"then ai={}end;if ae==0 then ae=1 end;local aj={Base=UIMenuItem.New(P or"",a3 or""),Items=ai,LeftArrow=Sprite.New("commonmenu","arrowleft",110,105,30,30),RightArrow=Sprite.New("commonmenu","arrowright",280,105,30,30),ItemText=UIResText.New("",290,104,0.35,255,255,255,255,0,"Right"),_Index=tonumber(ae)or 1,Panels={},OnListChanged=function(a4,a5,ak)end,OnListSelected=function(a4,a5,ak)end}return setmetatable(aj,UIMenuListItem)end;function UIMenuListItem:SetParentMenu(a9)if a9~=nil and a9()=="UIMenu"then self.Base.ParentMenu=a9 else return self.Base.ParentMenu end end;function UIMenuListItem:Position(q)if tonumber(q)then self.LeftArrow:Position(300+self.Base._Offset.X+self.Base.ParentMenu.WidthOffset,147+q+self.Base._Offset.Y)self.RightArrow:Position(400+self.Base._Offset.X+self.Base.ParentMenu.WidthOffset,147+q+self.Base._Offset.Y)self.ItemText:Position(300+self.Base._Offset.X+self.Base.ParentMenu.WidthOffset,147+q+self.Base._Offset.Y)self.Base:Position(q)end end;function UIMenuListItem:Selected(aa)if aa~=nil then self.Base._Selected=tobool(aa)else return self.Base._Selected end end;function UIMenuListItem:Hovered(aa)if aa~=nil then self.Base._Hovered=tobool(aa)else return self.Base._Hovered end end;function UIMenuListItem:Enabled(aa)if aa~=nil then self.Base._Enabled=tobool(aa)else return self.Base._Enabled end end;function UIMenuListItem:Description(m)if tostring(m)and m~=nil then self.Base._Description=tostring(m)else return self.Base._Description end end;function UIMenuListItem:Offset(p,q)if tonumber(p)or tonumber(q)then if tonumber(p)then self.Base._Offset.X=tonumber(p)end;if tonumber(q)then self.Base._Offset.Y=tonumber(q)end else return self.Base._Offset end end;function UIMenuListItem:Text(P)if tostring(P)and P~=nil then self.Base.Text:Text(tostring(P))else return self.Base.Text:Text()end end;function UIMenuListItem:Index(ae)if tonumber(ae)then if tonumber(ae)>#self.Items then self._Index=1 elseif tonumber(ae)<1 then self._Index=#self.Items else self._Index=tonumber(ae)end else return self._Index end end;function UIMenuListItem:ItemToIndex(Item)for i=1,#self.Items do if type(Item)==type(self.Items[i])and Item==self.Items[i]then return i elseif type(self.Items[i])=="table"and(type(Item)==type(self.Items[i].Name)or type(Item)==type(self.Items[i].Value))and(Item==self.Items[i].Name or Item==self.Items[i].Value)then return i end end end;function UIMenuListItem:IndexToItem(ae)if tonumber(ae)then if tonumber(ae)==0 then ae=1 end;if self.Items[tonumber(ae)]then return self.Items[tonumber(ae)]end end end;function UIMenuListItem:SetLeftBadge()error("This item does not support badges")end;function UIMenuListItem:SetRightBadge()error("This item does not support badges")end;function UIMenuListItem:RightLabel()error("This item does not support a right label")end;function UIMenuListItem:AddPanel(ad)if ad()=="UIMenuPanel"then table.insert(self.Panels,ad)ad:SetParentItem(self)end end;function UIMenuListItem:RemovePanelAt(ae)if tonumber(ae)then if self.Panels[ae]then table.remove(self.Panels,tonumber(ae))end end end;function UIMenuListItem:FindPanelIndex(ad)if ad()=="UIMenuPanel"then for ae=1,#self.Panels do if self.Panels[ae]==ad then return ae end end end;return nil end;function UIMenuListItem:FindPanelItem()for ae=#self.Items,1,-1 do if self.Items[ae].Panel then return ae end end;return nil end;function UIMenuListItem:Draw()self.Base:Draw()if self:Enabled()then if self:Selected()then self.ItemText:Colour(0,0,0,255)self.LeftArrow:Colour(0,0,0,255)self.RightArrow:Colour(0,0,0,255)else self.ItemText:Colour(245,245,245,255)self.LeftArrow:Colour(245,245,245,255)self.RightArrow:Colour(245,245,245,255)end else self.ItemText:Colour(163,159,148,255)self.LeftArrow:Colour(163,159,148,255)self.RightArrow:Colour(163,159,148,255)end;local P=type(self.Items[self._Index])=="table"and tostring(self.Items[self._Index].Name)or tostring(self.Items[self._Index])local al=MeasureStringWidth(P,0,0.35)self.ItemText:Text(P)self.LeftArrow:Position(378-al+self.Base._Offset.X+self.Base.ParentMenu.WidthOffset,self.LeftArrow.Y)if self:Selected()then self.LeftArrow:Draw()self.RightArrow:Draw()self.ItemText:Position(403+self.Base._Offset.X+self.Base.ParentMenu.WidthOffset,self.ItemText.Y)else self.ItemText:Position(418+self.Base._Offset.X+self.Base.ParentMenu.WidthOffset,self.ItemText.Y)end;self.ItemText:Draw()end;function UIMenuSliderItem.New(P,ai,ae,a3,am)if type(ai)~="table"then ai={}end;if ae==0 then ae=1 end;local an={Base=UIMenuItem.New(P or"",a3 or""),Items=ai,ShowDivider=tobool(am),LeftArrow=Sprite.New("commonmenutu","arrowleft",0,105,15,15),RightArrow=Sprite.New("commonmenutu","arrowright",0,105,15,15),Background=UIResRectangle.New(0,0,150,9,4,32,57,255),Slider=UIResRectangle.New(0,0,75,9,57,116,200,255),Divider=UIResRectangle.New(0,0,2.5,20,245,245,245,255),_Index=tonumber(ae)or 1,OnSliderChanged=function(a4,a5,ak)end,OnSliderSelected=function(a4,a5,ak)end}return setmetatable(an,UIMenuSliderItem)end;function UIMenuSliderItem:SetParentMenu(a9)if a9()=="UIMenu"then self.Base.ParentMenu=a9 else return self.Base.ParentMenu end end;function UIMenuSliderItem:Position(q)if tonumber(q)then self.Background:Position(250+self.Base._Offset.X+self.Base.ParentMenu.WidthOffset,q+158.5+self.Base._Offset.Y)self.Slider:Position(250+self.Base._Offset.X+self.Base.ParentMenu.WidthOffset,q+158.5+self.Base._Offset.Y)self.Divider:Position(323.5+self.Base._Offset.X+self.Base.ParentMenu.WidthOffset,q+153+self.Base._Offset.Y)self.LeftArrow:Position(235+self.Base._Offset.X+self.Base.ParentMenu.WidthOffset,155.5+q+self.Base._Offset.Y)self.RightArrow:Position(400+self.Base._Offset.X+self.Base.ParentMenu.WidthOffset,155.5+q+self.Base._Offset.Y)self.Base:Position(q)end end;function UIMenuSliderItem:Selected(aa)if aa~=nil then self.Base._Selected=tobool(aa)else return self.Base._Selected end end;function UIMenuSliderItem:Hovered(aa)if aa~=nil then self.Base._Hovered=tobool(aa)else return self.Base._Hovered end end;function UIMenuSliderItem:Enabled(aa)if aa~=nil then self.Base._Enabled=tobool(aa)else return self.Base._Enabled end end;function UIMenuSliderItem:Description(m)if tostring(m)and m~=nil then self.Base._Description=tostring(m)else return self.Base._Description end end;function UIMenuSliderItem:Offset(p,q)if tonumber(p)or tonumber(q)then if tonumber(p)then self.Base._Offset.X=tonumber(p)end;if tonumber(q)then self.Base._Offset.Y=tonumber(q)end else return self.Base._Offset end end;function UIMenuSliderItem:Text(P)if tostring(P)and P~=nil then self.Base.Text:Text(tostring(P))else return self.Base.Text:Text()end end;function UIMenuSliderItem:Index(ae)if tonumber(ae)then if tonumber(ae)>#self.Items then self._Index=1 elseif tonumber(ae)<1 then self._Index=#self.Items else self._Index=tonumber(ae)end else return self._Index end end;function UIMenuSliderItem:ItemToIndex(Item)for i=1,#self.Items do if type(Item)==type(self.Items[i])and Item==self.Items[i]then return i end end end;function UIMenuSliderItem:IndexToItem(ae)if tonumber(ae)then if tonumber(ae)==0 then ae=1 end;if self.Items[tonumber(ae)]then return self.Items[tonumber(ae)]end end end;function UIMenuSliderItem:SetLeftBadge()error("This item does not support badges")end;function UIMenuSliderItem:SetRightBadge()error("This item does not support badges")end;function UIMenuSliderItem:RightLabel()error("This item does not support a right label")end;function UIMenuSliderItem:Draw()self.Base:Draw()if self:Enabled()then if self:Selected()then self.LeftArrow:Colour(0,0,0,255)self.RightArrow:Colour(0,0,0,255)else self.LeftArrow:Colour(245,245,245,255)self.RightArrow:Colour(245,245,245,255)end else self.LeftArrow:Colour(163,159,148,255)self.RightArrow:Colour(163,159,148,255)end;local al=(self.Background.Width-self.Slider.Width)/(#self.Items-1)*(self._Index-1)self.Slider:Position(250+self.Base._Offset.X+al+self.Base.ParentMenu.WidthOffset,self.Slider.Y)if self:Selected()then self.LeftArrow:Draw()self.RightArrow:Draw()end;self.Background:Draw()self.Slider:Draw()if self.ShowDivider then self.Divider:Draw()end end;function UIMenuColouredItem.New(P,a3,ab,ac)if type(Colour)~="table"then Colour={R=0,G=0,B=0,A=255}end;if type(ac)~="table"then Colour={R=255,G=255,B=255,A=255}end;local ao={Base=UIMenuItem.New(P or"",a3 or""),Rectangle=UIResRectangle.New(0,0,431,38,ab.R,ab.G,ab.B,ab.A),MainColour=ab,HighlightColour=ac,Activated=function(a4,a5)end}ao.Base.SelectedSprite:Colour(ac.R,ac.G,ac.B,ac.A)return setmetatable(ao,UIMenuColouredItem)end;function UIMenuColouredItem:SetParentMenu(a9)if a9()=="UIMenu"then self.Base.ParentMenu=a9 else return self.Base.ParentMenu end end;function UIMenuColouredItem:Position(q)if tonumber(q)then self.Base:Position(q)self.Rectangle:Position(self.Base._Offset.X,q+144+self.Base._Offset.Y)end end;function UIMenuColouredItem:Selected(aa)if aa~=nil then self.Base._Selected=tobool(aa)else return self.Base._Selected end end;function UIMenuColouredItem:Hovered(aa)if aa~=nil then self.Base._Hovered=tobool(aa)else return self.Base._Hovered end end;function UIMenuColouredItem:Enabled(aa)if aa~=nil then self.Base._Enabled=tobool(aa)else return self.Base._Enabled end end;function UIMenuColouredItem:Description(m)if tostring(m)and m~=nil then self.Base._Description=tostring(m)else return self.Base._Description end end;function UIMenuColouredItem:Offset(p,q)if tonumber(p)or tonumber(q)then if tonumber(p)then self.Base._Offset.X=tonumber(p)end;if tonumber(q)then self.Base._Offset.Y=tonumber(q)end else return self.Base._Offset end end;function UIMenuColouredItem:Text(P)if tostring(P)and P~=nil then self.Base.Text:Text(tostring(P))else return self.Base.Text:Text()end end;function UIMenuColouredItem:RightLabel(P,ab,ac)if tostring(P)and P~=nil then if type(ab)=="table"then self.Base.Label.MainColour=ab end;if type(ac)=="table"then self.Base.Label.HighlightColour=ac end;self.Base.Label.Text:Text(tostring(P))else return self.Base.Label.Text:Text()end end;function UIMenuColouredItem:SetLeftBadge(a2)if tonumber(a2)then self.Base.LeftBadge.Badge=tonumber(a2)end end;function UIMenuColouredItem:SetRightBadge(a2)if tonumber(a2)then self.Base.RightBadge.Badge=tonumber(a2)end end;function UIMenuColouredItem:Draw()self.Rectangle:Size(431+self.ParentMenu.WidthOffset,self.Rectangle.Height)self.Rectangle:Draw()self.Base:Draw()end;function UIMenuProgressItem.New(P,ai,ae,a3,ap)if type(ai)~="table"then ai={}end;if ae==0 then ae=1 end;local aq={Base=UIMenuItem.New(P or"",a3 or""),Data={Items=ai,Counter=tobool(ap),Max=407.5,Index=tonumber(ae)or 1},Background=UIResRectangle.New(0,0,415,20),Bar=UIResRectangle.New(0,0,407.5,12.5),OnProgressChanged=function(a4,a5,ak)end,OnProgressSelected=function(a4,a5,ak)end}aq.Base.Rectangle.Height=60;aq.Base.SelectedSprite.Height=60;if aq.Data.Counter then aq.Base:RightLabel(aq.Data.Index.."/"..#aq.Data.Items)else aq.Base:RightLabel(type(aq.Data.Items[aq.Data.Index])=="table"and tostring(aq.Data.Items[aq.Data.Index].Name)or tostring(aq.Data.Items[aq.Data.Index]))end;aq.Bar.Width=aq.Data.Index/#aq.Data.Items*aq.Data.Max;return setmetatable(aq,UIMenuProgressItem)end;function UIMenuProgressItem:SetParentMenu(a9)if a9()=="UIMenu"then self.Base.ParentMenu=a9 else return self.Base.ParentMenu end end;function UIMenuProgressItem:Position(q)if tonumber(q)then self.Base:Position(q)self.Background:Position(8+self.Base._Offset.X+self.Base.ParentMenu.WidthOffset,177+q+self.Base._Offset.Y)self.Bar:Position(11.75+self.Base._Offset.X+self.Base.ParentMenu.WidthOffset,180.75+q+self.Base._Offset.Y)end end;function UIMenuProgressItem:Selected(aa)if aa~=nil then self.Base._Selected=tobool(aa)else return self.Base._Selected end end;function UIMenuProgressItem:Hovered(aa)if aa~=nil then self.Base._Hovered=tobool(aa)else return self.Base._Hovered end end;function UIMenuProgressItem:Enabled(aa)if aa~=nil then self.Base._Enabled=tobool(aa)else return self.Base._Enabled end end;function UIMenuProgressItem:Description(m)if tostring(m)and m~=nil then self.Base._Description=tostring(m)else return self.Base._Description end end;function UIMenuProgressItem:Offset(p,q)if tonumber(p)or tonumber(q)then if tonumber(p)then self.Base._Offset.X=tonumber(p)end;if tonumber(q)then self.Base._Offset.Y=tonumber(q)end else return self.Base._Offset end end;function UIMenuProgressItem:Text(P)if tostring(P)and P~=nil then self.Base.Text:Text(tostring(P))else return self.Base.Text:Text()end end;function UIMenuProgressItem:Index(ae)if tonumber(ae)then if tonumber(ae)>#self.Data.Items then self.Data.Index=1 elseif tonumber(ae)<1 then self.Data.Index=#self.Data.Items else self.Data.Index=tonumber(ae)end;if self.Data.Counter then self.Base:RightLabel(self.Data.Index.."/"..#self.Data.Items)else self.Base:RightLabel(type(self.Data.Items[self.Data.Index])=="table"and tostring(self.Data.Items[self.Data.Index].Name)or tostring(self.Data.Items[self.Data.Index]))end;self.Bar.Width=self.Data.Index/#self.Data.Items*self.Data.Max else return self.Data.Index end end;function UIMenuProgressItem:ItemToIndex(Item)for i=1,#self.Data.Items do if type(Item)==type(self.Data.Items[i])and Item==self.Data.Items[i]then return i elseif type(self.Data.Items[i])=="table"and(type(Item)==type(self.Data.Items[i].Name)or type(Item)==type(self.Data.Items[i].Value))and(Item==self.Data.Items[i].Name or Item==self.Data.Items[i].Value)then return i end end end;function UIMenuProgressItem:IndexToItem(ae)if tonumber(ae)then if tonumber(ae)==0 then ae=1 end;if self.Data.Items[tonumber(ae)]then return self.Data.Items[tonumber(ae)]end end end;function UIMenuProgressItem:SetLeftBadge()error("This item does not support badges")end;function UIMenuProgressItem:SetRightBadge()error("This item does not support badges")end;function UIMenuProgressItem:RightLabel()error("This item does not support a right label")end;function UIMenuProgressItem:CalculateProgress(ar)local as=ar-self.Bar.X;self:Index(math.round(#self.Data.Items*(as>=0 and as<=self.Data.Max and as or(as<0 and 0 or self.Data.Max))/self.Data.Max))end;function UIMenuProgressItem:Draw()self.Base:Draw()if self.Base._Selected then self.Background:Colour(table.unpack(Colours.Black))self.Bar:Colour(table.unpack(Colours.White))else self.Background:Colour(table.unpack(Colours.White))self.Bar:Colour(table.unpack(Colours.Black))end;self.Background:Draw()self.Bar:Draw()end;function UIMenuHeritageWindow.New(at,au)if not tonumber(at)then at=0 end;if not(at>=0 and at<=21)then at=0 end;if not tonumber(au)then au=0 end;if not(au>=0 and au<=23)then au=0 end;_UIMenuHeritageWindow={Background=Sprite.New("pause_menu_pages_char_mom_dad","mumdadbg",0,0,431,228),MumSprite=Sprite.New("char_creator_portraits",at<21 and"female_"..at or"special_female_"..tonumber(string.sub(at,2,2))-1,0,0,228,228),DadSprite=Sprite.New("char_creator_portraits",au<21 and"male_"..au or"special_male_"..tonumber(string.sub(au,2,2))-1,0,0,228,228),Mum=at,Dad=au,_Offset={X=0,Y=0},ParentMenu=nil}return setmetatable(_UIMenuHeritageWindow,UIMenuHeritageWindow)end;function UIMenuHeritageWindow:SetParentMenu(a9)if a9()=="UIMenu"then self.ParentMenu=a9 else return self.ParentMenu end end;function UIMenuHeritageWindow:Offset(p,q)if tonumber(p)or tonumber(q)then if tonumber(p)then self._Offset.X=tonumber(p)end;if tonumber(q)then self._Offset.Y=tonumber(q)end else return self._Offset end end;function UIMenuHeritageWindow:Position(q)if tonumber(q)then self.Background:Position(self._Offset.X,144+q+self._Offset.Y)self.MumSprite:Position(self._Offset.X+self.ParentMenu.WidthOffset/2+25,144+q+self._Offset.Y)self.DadSprite:Position(self._Offset.X+self.ParentMenu.WidthOffset/2+195,144+q+self._Offset.Y)end end;function UIMenuHeritageWindow:Index(at,au)if not tonumber(at)then at=self.Mum end;if not(at>=0 and at<=21)then at=self.Mum end;if not tonumber(au)then au=self.Dad end;if not(au>=0 and au<=23)then au=self.Dad end;self.Mum=at;self.Dad=au;self.MumSprite.TxtName=self.Mum<21 and"female_"..self.Mum or"special_female_"..tonumber(string.sub(at,2,2))-1;self.DadSprite.TxtName=self.Dad<21 and"male_"..self.Dad or"special_male_"..tonumber(string.sub(au,2,2))-1 end;function UIMenuHeritageWindow:Draw()self.Background:Size(431+self.ParentMenu.WidthOffset,228)self.Background:Draw()self.DadSprite:Draw()self.MumSprite:Draw()end;UIMenuGridPanel=setmetatable({},UIMenuGridPanel)UIMenuGridPanel.__index=UIMenuGridPanel;UIMenuGridPanel.__call=function()return"UIMenuPanel","UIMenuGridPanel"end;function UIMenuGridPanel.New(av,aw,ax,ay)_UIMenuGridPanel={Data={Enabled=true},Background=Sprite.New("commonmenu","gradient_bgd",0,0,431,275),Grid=Sprite.New("pause_menu_pages_char_mom_dad","nose_grid",0,0,200,200,0),Circle=Sprite.New("mpinventory","in_world_circle",0,0,20,20,0),Audio={Slider="CONTINUOUS_SLIDER",Library="HUD_FRONTEND_DEFAULT_SOUNDSET",Id=nil},ParentItem=nil,Text={Top=UIResText.New(av or"Top",0,0,0.35,255,255,255,255,0,"Centre"),Left=UIResText.New(aw or"Left",0,0,0.35,255,255,255,255,0,"Centre"),Right=UIResText.New(ax or"Right",0,0,0.35,255,255,255,255,0,"Centre"),Bottom=UIResText.New(ay or"Bottom",0,0,0.35,255,255,255,255,0,"Centre")}}return setmetatable(_UIMenuGridPanel,UIMenuGridPanel)end;function UIMenuGridPanel:SetParentItem(Item)if Item()=="UIMenuItem"then self.ParentItem=Item else return self.ParentItem end end;function UIMenuGridPanel:Enabled(az)if type(az)=="boolean"then self.Data.Enabled=az else return self.Data.Enabled end end;function UIMenuGridPanel:CirclePosition(p,q)if tonumber(p)and tonumber(q)then self.Circle.X=self.Grid.X+20+(self.Grid.Width-40)*(p>=0.0 and p<=1.0 and p or 0.0)-self.Circle.Width/2;self.Circle.Y=self.Grid.Y+20+(self.Grid.Height-40)*(q>=0.0 and q<=1.0 and q or 0.0)-self.Circle.Height/2 else return math.round((self.Circle.X-(self.Grid.X+20)+self.Circle.Width/2)/(self.Grid.Width-40),2),math.round((self.Circle.Y-(self.Grid.Y+20)+self.Circle.Height/2)/(self.Grid.Height-40),2)end end;function UIMenuGridPanel:Position(q)if tonumber(q)then local aA,aB=self.ParentItem:Offset().X,self.ParentItem:SetParentMenu().WidthOffset;self.Background:Position(aA,q)self.Grid:Position(aA+115.5+aB/2,37.5+q)self.Text.Top:Position(aA+215.5+aB/2,5+q)self.Text.Left:Position(aA+57.75+aB/2,120+q)self.Text.Right:Position(aA+373.25+aB/2,120+q)self.Text.Bottom:Position(aA+215.5+aB/2,240+q)if not self.CircleLocked then self.CircleLocked=true;self:CirclePosition(0.5,0.5)end end end;function UIMenuGridPanel:UpdateParent(p,q)local _,aC=self.ParentItem()if aC=="UIMenuListItem"then local aD=self.ParentItem:FindPanelItem()if aD then self.ParentItem.Items[aD].Value[self.ParentItem:FindPanelIndex(self)]={X=p,Y=q}self.ParentItem:Index(aD)self.ParentItem.Base.ParentMenu.OnListChange(self.ParentItem.Base.ParentMenu,self.ParentItem,self.ParentItem._Index)self.ParentItem.OnListChanged(self.ParentItem.Base.ParentMenu,self.ParentItem,self.ParentItem._Index)else local aE=self.ParentItem:FindPanelIndex(self)for ae=1,#self.ParentItem.Items do if type(self.ParentItem.Items[ae])=="table"then if not self.ParentItem.Items[ae].Panels then self.ParentItem.Items[ae].Panels={}end;self.ParentItem.Items[ae].Panels[aE]={X=p,Y=q}else self.ParentItem.Items[ae]={Name=tostring(self.ParentItem.Items[ae]),Value=self.ParentItem.Items[ae],Panels={[aE]={X=p,Y=q}}}end end;self.ParentItem.Base.ParentMenu.OnListChange(self.ParentItem.Base.ParentMenu,self.ParentItem,self.ParentItem._Index)self.ParentItem.OnListChanged(self.ParentItem.Base.ParentMenu,self.ParentItem,self.ParentItem._Index)end elseif aC=="UIMenuItem"then self.ParentItem.ActivatedPanel(self.ParentItem.ParentMenu,self.ParentItem,self,{X=p,Y=q})end end;function UIMenuGridPanel:Functions()local aF={X=0,Y=0}if self.ParentItem:SetParentMenu().Settings.ScaleWithSafezone then aF=GetSafeZoneBounds()end;if IsMouseInBounds(self.Grid.X+20+aF.X,self.Grid.Y+20+aF.Y,self.Grid.Width-40,self.Grid.Height-40)then if IsDisabledControlJustPressed(0,24)then if not self.Pressed then self.Pressed=true;Citizen.CreateThread(function()self.Audio.Id=GetSoundId()PlaySoundFrontend(self.Audio.Id,self.Audio.Slider,self.Audio.Library,1)while IsDisabledControlPressed(0,24)and IsMouseInBounds(self.Grid.X+20+aF.X,self.Grid.Y+20+aF.Y,self.Grid.Width-40,self.Grid.Height-40)do Citizen.Wait(0)local ar,aG=math.round(GetControlNormal(0,239)*1920)-aF.X-self.Circle.Width/2,math.round(GetControlNormal(0,240)*1080)-aF.Y-self.Circle.Height/2;self.Circle:Position(ar>self.Grid.X+10+self.Grid.Width-40 and self.Grid.X+10+self.Grid.Width-40 or(ar<self.Grid.X+20-self.Circle.Width/2 and self.Grid.X+20-self.Circle.Width/2 or ar),aG>self.Grid.Y+10+self.Grid.Height-40 and self.Grid.Y+10+self.Grid.Height-40 or(aG<self.Grid.Y+20-self.Circle.Height/2 and self.Grid.Y+20-self.Circle.Height/2 or aG))end;StopSound(self.Audio.Id)ReleaseSoundId(self.Audio.Id)self.Pressed=false end)Citizen.CreateThread(function()while IsDisabledControlPressed(0,24)and IsMouseInBounds(self.Grid.X+20+aF.X,self.Grid.Y+20+aF.Y,self.Grid.Width-40,self.Grid.Height-40)do Citizen.Wait(75)local aH,aI=math.round((self.Circle.X-(self.Grid.X+20)+self.Circle.Width/2)/(self.Grid.Width-40),2),math.round((self.Circle.Y-(self.Grid.Y+20)+self.Circle.Height/2)/(self.Grid.Height-40),2)self:UpdateParent((aH>=0.0 and aH<=1.0 and aH or aH<=0 and 0.0 or 1.0)*2-1,(aI>=0.0 and aI<=1.0 and aI or aI<=0 and 0.0 or 1.0)*2-1)end end)end end end end;function UIMenuGridPanel:Draw()if self.Data.Enabled then self.Background:Size(431+self.ParentItem:SetParentMenu().WidthOffset,275)self.Background:Draw()self.Grid:Draw()self.Circle:Draw()self.Text.Top:Draw()self.Text.Left:Draw()self.Text.Right:Draw()self.Text.Bottom:Draw()self:Functions()end end;UIMenuColourPanel=setmetatable({},UIMenuColourPanel)UIMenuColourPanel.__index=UIMenuColourPanel;UIMenuColourPanel.__call=function()return"UIMenuPanel","UIMenuColourPanel"end;function UIMenuColourPanel.New(aJ,Colours)_UIMenuColourPanel={Data={Pagination={Min=1,Max=8,Total=8},Index=1000,Items=Colours,Title=aJ or"Title",Enabled=true,Value=1},Background=Sprite.New("commonmenu","gradient_bgd",0,0,431,112),Bar={},LeftArrow=Sprite.New("commonmenu","arrowleft",0,0,30,30),RightArrow=Sprite.New("commonmenu","arrowright",0,0,30,30),SelectedRectangle=UIResRectangle.New(0,0,44.5,8),Text=UIResText.New(aJ.." (1 of "..#Colours..")"or"Title".." (1 of "..#Colours..")",0,0,0.35,255,255,255,255,0,"Centre"),ParentItem=nil}for ae=1,#Colours do if ae<10 then table.insert(_UIMenuColourPanel.Bar,UIResRectangle.New(0,0,44.5,44.5,table.unpack(Colours[ae])))else break end end;if#_UIMenuColourPanel.Data.Items~=0 then _UIMenuColourPanel.Data.Index=1000-1000%#_UIMenuColourPanel.Data.Items;_UIMenuColourPanel.Data.Pagination.Max=_UIMenuColourPanel.Data.Pagination.Total+1;_UIMenuColourPanel.Data.Pagination.Min=0 end;return setmetatable(_UIMenuColourPanel,UIMenuColourPanel)end;function UIMenuColourPanel:SetParentItem(Item)if Item()=="UIMenuItem"then self.ParentItem=Item else return self.ParentItem end end;function UIMenuColourPanel:Enabled(az)if type(az)=="boolean"then self.Data.Enabled=az else return self.Data.Enabled end end;function UIMenuColourPanel:Position(q)if tonumber(q)then local aA,aB=self.ParentItem:Offset().X,self.ParentItem:SetParentMenu().WidthOffset;self.Background:Position(aA,q)for ae=1,#self.Bar do self.Bar[ae]:Position(15+44.5*(ae-1)+aA+aB/2,55+q)end;self.SelectedRectangle:Position(15+44.5*(self:CurrentSelection()-self.Data.Pagination.Min-1)+aA+aB/2,47+q)self.LeftArrow:Position(7.5+aA+aB/2,15+q)self.RightArrow:Position(393.5+aA+aB/2,15+q)self.Text:Position(215.5+aA+aB/2,15+q)end end;function UIMenuColourPanel:CurrentSelection(aK,aL)if tonumber(aK)then if#self.Data.Items==0 then self.Data.Index=0 end;self.Data.Index=1000000-1000000%#self.Data.Items+tonumber(aK)if self:CurrentSelection()>self.Data.Pagination.Max then self.Data.Pagination.Min=self:CurrentSelection()-(self.Data.Pagination.Total+1)self.Data.Pagination.Max=self:CurrentSelection()elseif self:CurrentSelection()<self.Data.Pagination.Min then self.Data.Pagination.Min=self:CurrentSelection()-1;self.Data.Pagination.Max=self:CurrentSelection()+self.Data.Pagination.Total+1 end;self:UpdateSelection(aL)else if#self.Data.Items==0 then return 1 else if self.Data.Index%#self.Data.Items==0 then return 1 else return self.Data.Index%#self.Data.Items+1 end end end end;function UIMenuColourPanel:UpdateParent(Colour)local _,aC=self.ParentItem()if aC=="UIMenuListItem"then local aD=self.ParentItem:FindPanelItem()local aE=self.ParentItem:FindPanelIndex(self)if aD then self.ParentItem.Items[aD].Value[aE]=Colour;self.ParentItem:Index(aD)self.ParentItem.Base.ParentMenu.OnListChange(self.ParentItem.Base.ParentMenu,self.ParentItem,self.ParentItem._Index)self.ParentItem.OnListChanged(self.ParentItem.Base.ParentMenu,self.ParentItem,self.ParentItem._Index)else for ae=1,#self.ParentItem.Items do if type(self.ParentItem.Items[ae])=="table"then if not self.ParentItem.Items[ae].Panels then self.ParentItem.Items[ae].Panels={}end;self.ParentItem.Items[ae].Panels[aE]=Colour else self.ParentItem.Items[ae]={Name=tostring(self.ParentItem.Items[ae]),Value=self.ParentItem.Items[ae],Panels={[aE]=Colour}}end end;self.ParentItem.Base.ParentMenu.OnListChange(self.ParentItem.Base.ParentMenu,self.ParentItem,self.ParentItem._Index)self.ParentItem.OnListChanged(self.ParentItem.Base.ParentMenu,self.ParentItem,self.ParentItem._Index)end elseif aC=="UIMenuItem"then self.ParentItem.ActivatedPanel(self.ParentItem.ParentMenu,self.ParentItem,self,Colour)end end;function UIMenuColourPanel:UpdateSelection(aL)local aM=self:CurrentSelection()if not aL then self:UpdateParent(aM)end;self.SelectedRectangle:Position(15+44.5*(aM-self.Data.Pagination.Min-1)+self.ParentItem:Offset().X,self.SelectedRectangle.Y)for ae=1,9 do self.Bar[ae]:Colour(table.unpack(self.Data.Items[self.Data.Pagination.Min+ae]))end;self.Text:Text(self.Data.Title.." ("..aM.." of "..#self.Data.Items..")")end;function UIMenuColourPanel:Functions()local aF={X=0,Y=0}if self.ParentItem:SetParentMenu().Settings.ScaleWithSafezone then aF=GetSafeZoneBounds()end;if IsMouseInBounds(self.LeftArrow.X+aF.X,self.LeftArrow.Y+aF.Y,self.LeftArrow.Width,self.LeftArrow.Height)then if IsDisabledControlJustPressed(0,24)then if#self.Data.Items>self.Data.Pagination.Total+1 then if self:CurrentSelection()<=self.Data.Pagination.Min+1 then if self:CurrentSelection()==1 then self.Data.Pagination.Min=#self.Data.Items-(self.Data.Pagination.Total+1)self.Data.Pagination.Max=#self.Data.Items;self.Data.Index=1000-1000%#self.Data.Items;self.Data.Index=self.Data.Index+#self.Data.Items-1;self:UpdateSelection()else self.Data.Pagination.Min=self.Data.Pagination.Min-1;self.Data.Pagination.Max=self.Data.Pagination.Max-1;self.Data.Index=self.Data.Index-1;self:UpdateSelection()end else self.Data.Index=self.Data.Index-1;self:UpdateSelection()end else self.Data.Index=self.Data.Index-1;self:UpdateSelection()end end end;if IsMouseInBounds(self.RightArrow.X+aF.X,self.RightArrow.Y+aF.Y,self.RightArrow.Width,self.RightArrow.Height)then if IsDisabledControlJustPressed(0,24)then if#self.Data.Items>self.Data.Pagination.Total+1 then if self:CurrentSelection()>=self.Data.Pagination.Max then if self:CurrentSelection()==#self.Data.Items then self.Data.Pagination.Min=0;self.Data.Pagination.Max=self.Data.Pagination.Total+1;self.Data.Index=1000-1000%#self.Data.Items;self:UpdateSelection()else self.Data.Pagination.Max=self.Data.Pagination.Max+1;self.Data.Pagination.Min=self.Data.Pagination.Max-(self.Data.Pagination.Total+1)self.Data.Index=self.Data.Index+1;self:UpdateSelection()end else self.Data.Index=self.Data.Index+1;self:UpdateSelection()end else self.Data.Index=self.Data.Index+1;self:UpdateSelection()end end end;for ae=1,#self.Bar do if IsMouseInBounds(self.Bar[ae].X+aF.X,self.Bar[ae].Y+aF.Y,self.Bar[ae].Width,self.Bar[ae].Height)then if IsDisabledControlJustPressed(0,24)then self:CurrentSelection(self.Data.Pagination.Min+ae-1)end end end end;function UIMenuColourPanel:Draw()if self.Data.Enabled then self.Background:Size(431+self.ParentItem:SetParentMenu().WidthOffset,112)self.Background:Draw()self.LeftArrow:Draw()self.RightArrow:Draw()self.Text:Draw()self.SelectedRectangle:Draw()for ae=1,#self.Bar do self.Bar[ae]:Draw()end;self:Functions()end end;UIMenuPercentagePanel=setmetatable({},UIMenuPercentagePanel)UIMenuPercentagePanel.__index=UIMenuPercentagePanel;UIMenuPercentagePanel.__call=function()return"UIMenuPanel","UIMenuPercentagePanel"end;function UIMenuPercentagePanel.New(aN,aO)_UIMenuPercentagePanel={Data={Enabled=true},Background=Sprite.New("commonmenu","gradient_bgd",0,0,431,76),ActiveBar=UIResRectangle.New(0,0,413,10,245,245,245,255),BackgroundBar=UIResRectangle.New(0,0,413,10,87,87,87,255),Text={Min=UIResText.New(aN or"0%",0,0,0.35,255,255,255,255,0,"Centre"),Max=UIResText.New("100%",0,0,0.35,255,255,255,255,0,"Centre"),Title=UIResText.New(aO or"Opacity",0,0,0.35,255,255,255,255,0,"Centre")},Audio={Slider="CONTINUOUS_SLIDER",Library="HUD_FRONTEND_DEFAULT_SOUNDSET",Id=nil},ParentItem=nil}return setmetatable(_UIMenuPercentagePanel,UIMenuPercentagePanel)end;function UIMenuPercentagePanel:SetParentItem(Item)if Item()=="UIMenuItem"then self.ParentItem=Item else return self.ParentItem end end;function UIMenuPercentagePanel:Enabled(az)if type(az)=="boolean"then self.Data.Enabled=az else return self.Data.Enabled end end;function UIMenuPercentagePanel:Position(q)if tonumber(q)then local aA,aB=self.ParentItem:Offset().X,self.ParentItem:SetParentMenu().WidthOffset;self.Background:Position(aA,q)self.ActiveBar:Position(aA+aB/2+9,50+q)self.BackgroundBar:Position(aA+aB/2+9,50+q)self.Text.Min:Position(aA+aB/2+25,15+q)self.Text.Max:Position(aA+aB/2+398,15+q)self.Text.Title:Position(aA+aB/2+215.5,15+q)end end;function UIMenuPercentagePanel:Percentage(d)if tonumber(d)then local aP=d<0.0 and 0.0 or(d>1.0 and 1.0 or d)self.ActiveBar:Size(self.BackgroundBar.Width*aP,self.ActiveBar.Height)else local aF={X=0,Y=0}if self.ParentItem:SetParentMenu().Settings.ScaleWithSafezone then aF=GetSafeZoneBounds()end;local as=math.round(GetControlNormal(0,239)*1920)-aF.X-self.ActiveBar.X;return math.round((as>=0 and as<=413 and as or(as<0 and 0 or 413))/self.BackgroundBar.Width,2)end end;function UIMenuPercentagePanel:UpdateParent(aQ)local _,aC=self.ParentItem()if aC=="UIMenuListItem"then local aD=self.ParentItem:FindPanelItem()if aD then self.ParentItem.Items[aD].Value[self.ParentItem:FindPanelIndex(self)]=aQ;self.ParentItem:Index(aD)self.ParentItem.Base.ParentMenu.OnListChange(self.ParentItem.Base.ParentMenu,self.ParentItem,self.ParentItem._Index)self.ParentItem.OnListChanged(self.ParentItem.Base.ParentMenu,self.ParentItem,self.ParentItem._Index)else local aE=self.ParentItem:FindPanelIndex(self)for ae=1,#self.ParentItem.Items do if type(self.ParentItem.Items[ae])=="table"then if not self.ParentItem.Items[ae].Panels then self.ParentItem.Items[ae].Panels={}end;self.ParentItem.Items[ae].Panels[aE]=aQ else self.ParentItem.Items[ae]={Name=tostring(self.ParentItem.Items[ae]),Value=self.ParentItem.Items[ae],Panels={[aE]=aQ}}end end;self.ParentItem.Base.ParentMenu.OnListChange(self.ParentItem.Base.ParentMenu,self.ParentItem,self.ParentItem._Index)self.ParentItem.OnListChanged(self.ParentItem.Base.ParentMenu,self.ParentItem,self.ParentItem._Index)end elseif aC=="UIMenuItem"then self.ParentItem.ActivatedPanel(self.ParentItem.ParentMenu,self.ParentItem,self,aQ)end end;function UIMenuPercentagePanel:Functions()local aF={X=0,Y=0}if self.ParentItem:SetParentMenu().Settings.ScaleWithSafezone then aF=GetSafeZoneBounds()end;if IsMouseInBounds(self.BackgroundBar.X+aF.X,self.BackgroundBar.Y-4+aF.Y,self.BackgroundBar.Width,self.BackgroundBar.Height+8)then if IsDisabledControlJustPressed(0,24)then if not self.Pressed then self.Pressed=true;Citizen.CreateThread(function()self.Audio.Id=GetSoundId()PlaySoundFrontend(self.Audio.Id,self.Audio.Slider,self.Audio.Library,1)while IsDisabledControlPressed(0,24)and IsMouseInBounds(self.BackgroundBar.X+aF.X,self.BackgroundBar.Y-4+aF.Y,self.BackgroundBar.Width,self.BackgroundBar.Height+8)do Citizen.Wait(0)local as=math.round(GetControlNormal(0,239)*1920)-aF.X-self.ActiveBar.X;self.ActiveBar:Size(as>=0 and as<=413 and as or(as<0 and 0 or 413),self.ActiveBar.Height)end;StopSound(self.Audio.Id)ReleaseSoundId(self.Audio.Id)self.Pressed=false end)Citizen.CreateThread(function()while IsDisabledControlPressed(0,24)and IsMouseInBounds(self.BackgroundBar.X+aF.X,self.BackgroundBar.Y-4+aF.Y,self.BackgroundBar.Width,self.BackgroundBar.Height+8)do Citizen.Wait(75)local as=math.round(GetControlNormal(0,239)*1920)-aF.X-self.ActiveBar.X;self:UpdateParent(math.round((as>=0 and as<=413 and as or(as<0 and 0 or 413))/self.BackgroundBar.Width,2))end end)end end end end;function UIMenuPercentagePanel:Draw()if self.Data.Enabled then self.Background:Size(431+self.ParentItem:SetParentMenu().WidthOffset,76)self.Background:Draw()self.BackgroundBar:Draw()self.ActiveBar:Draw()self.Text.Min:Draw()self.Text.Max:Draw()self.Text.Title:Draw()self:Functions()end end;function UIMenu.New(aJ,aR,p,q,X,Y)local p,q=tonumber(p)or 0,tonumber(q)or 0;if aJ~=nil then aJ=tostring(aJ)or""else aJ=""end;if aR~=nil then aR=tostring(aR)or""else aR=""end;if X~=nil then X=tostring(X)or"commonmenu"else X="commonmenu"end;if Y~=nil then Y=tostring(Y)or"interaction_bgd"else Y="interaction_bgd"end;local aS={Logo=Sprite.New(X,Y,0+p,0+q,431,107),Banner=nil,Title=UIResText.New(aJ,215+p,20+q,1.15,255,255,255,255,1,1),Subtitle={ExtraY=0},WidthOffset=0,Position={X=p,Y=q},Pagination={Min=0,Max=9,Total=9},PageCounter={PreText=""},Extra={},Description={},Items={},Windows={},Children={},Controls={Back={Enabled=true},Select={Enabled=true},Left={Enabled=true},Right={Enabled=true},Up={Enabled=true},Down={Enabled=true}},ParentMenu=nil,ParentItem=nil,_Visible=false,ActiveItem=1000,Dirty=false,ReDraw=true,InstructionalScaleform=RequestScaleformMovie("INSTRUCTIONAL_BUTTONS"),InstructionalButtons={},OnIndexChange=function(a4,ak)end,OnListChange=function(a4,aT,ak)end,OnSliderChange=function(a4,aU,ak)end,OnProgressChange=function(a4,aV,ak)end,OnCheckboxChange=function(a4,a5,ah)end,OnListSelect=function(a4,aT,aW)end,OnSliderSelect=function(a4,aU,aW)end,OnProgressSelect=function(a4,aV,aW)end,OnItemSelect=function(a4,a5,aW)end,OnMenuChanged=function(a4,aX,aY)end,OnMenuClosed=function(a4)end,Settings={InstructionalButtons=true,MultilineFormats=true,ScaleWithSafezone=true,ResetCursorOnOpen=true,MouseControlsEnabled=true,MouseEdgeEnabled=true,ControlDisablingEnabled=true,Audio={Library="HUD_FRONTEND_DEFAULT_SOUNDSET",UpDown="NAV_UP_DOWN",LeftRight="NAV_LEFT_RIGHT",Select="SELECT",Back="BACK",Error="ERROR"},EnabledControls={Controller={{0,2},{0,1},{0,25},{0,24}},Keyboard={{0,201},{0,195},{0,196},{0,187},{0,188},{0,189},{0,190},{0,202},{0,217},{0,242},{0,241},{0,239},{0,240},{0,31},{0,30},{0,21},{0,22},{0,23},{0,75},{0,71},{0,72},{0,59},{0,89},{0,9},{0,8},{0,90},{0,76}}}}}if aR~=""and aR~=nil then aS.Subtitle.Rectangle=UIResRectangle.New(0+aS.Position.X,107+aS.Position.Y,431,37,0,0,0,255)aS.Subtitle.Text=UIResText.New(aR,8+aS.Position.X,110+aS.Position.Y,0.35,245,245,245,255,0)aS.Subtitle.BackupText=aR;aS.Subtitle.Formatted=false;if string.starts(aR,"~")then aS.PageCounter.PreText=string.sub(aR,1,3)end;aS.PageCounter.Text=UIResText.New("",425+aS.Position.X,110+aS.Position.Y,0.35,245,245,245,255,0,"Right")aS.Subtitle.ExtraY=37 end;aS.ArrowSprite=Sprite.New("commonmenu","shop_arrows_upanddown",190+aS.Position.X,147+37*(aS.Pagination.Total+1)+aS.Position.Y-37+aS.Subtitle.ExtraY,50,50)aS.Extra.Up=UIResRectangle.New(0+aS.Position.X,144+38*(aS.Pagination.Total+1)+aS.Position.Y-37+aS.Subtitle.ExtraY,431,18,0,0,0,200)aS.Extra.Down=UIResRectangle.New(0+aS.Position.X,144+18+38*(aS.Pagination.Total+1)+aS.Position.Y-37+aS.Subtitle.ExtraY,431,18,0,0,0,200)aS.Description.Bar=UIResRectangle.New(aS.Position.X,123,431,4,0,0,0,255)aS.Description.Rectangle=Sprite.New("commonmenu","gradient_bgd",aS.Position.X,127,431,30)aS.Description.Text=UIResText.New("Description",aS.Position.X+5,125,0.35)aS.Background=Sprite.New("commonmenu","gradient_bgd",aS.Position.X,144+aS.Position.Y-37+aS.Subtitle.ExtraY,290,25)Citizen.CreateThread(function()if not HasScaleformMovieLoaded(aS.InstructionalScaleform)then aS.InstructionalScaleform=RequestScaleformMovie("INSTRUCTIONAL_BUTTONS")while not HasScaleformMovieLoaded(aS.InstructionalScaleform)do Citizen.Wait(0)end end end)return setmetatable(aS,UIMenu)end;function UIMenu:SetMenuWidthOffset(al)if tonumber(al)then self.WidthOffset=math.floor(tonumber(al))self.Logo:Size(431+self.WidthOffset,107)self.Title:Position((self.WidthOffset+431)/2+self.Position.X,20+self.Position.Y)if self.Subtitle.Rectangle~=nil then self.Subtitle.Rectangle:Size(431+self.WidthOffset+100,37)self.PageCounter.Text:Position(425+self.Position.X+self.WidthOffset,110+self.Position.Y)end;if self.Banner~=nil then self.Banner:Size(431+self.WidthOffset,107)end end end;function UIMenu:DisEnableControls(aa)if aa then EnableAllControlActions(2)else DisableAllControlActions(2)end;if aa then return else if Controller()then for ae=1,#self.Settings.EnabledControls.Controller do EnableControlAction(self.Settings.EnabledControls.Controller[ae][1],self.Settings.EnabledControls.Controller[ae][2],true)end else for ae=1,#self.Settings.EnabledControls.Keyboard do EnableControlAction(self.Settings.EnabledControls.Keyboard[ae][1],self.Settings.EnabledControls.Keyboard[ae][2],true)end end end end;function UIMenu:InstructionalButtons(aa)if aa~=nil then self.Settings.InstrucitonalButtons=tobool(aa)end end;function UIMenu:SetBannerSprite(Sprite,aZ)if Sprite()=="Sprite"then self.Logo=Sprite;self.Logo:Size(431+self.WidthOffset,107)self.Logo:Position(self.Position.X,self.Position.Y)self.Banner=nil;if aZ then for Item,a9 in pairs(self.Children)do a9.Logo=Sprite;a9.Logo:Size(431+self.WidthOffset,107)a9.Logo:Position(self.Position.X,self.Position.Y)a9.Banner=nil end end end end;function UIMenu:SetBannerRectangle(a_,aZ)if a_()=="Rectangle"then self.Banner=a_;self.Banner:Size(431+self.WidthOffset,107)self.Banner:Position(self.Position.X,self.Position.Y)self.Logo=nil;if aZ then for Item,a9 in pairs(self.Children)do a9.Banner=a_;a9.Banner:Size(431+self.WidthOffset,107)a9:Position(self.Position.X,self.Position.Y)a9.Logo=nil end end end end;function UIMenu:CurrentSelection(aK)if tonumber(aK)then if#self.Items==0 then self.ActiveItem=0 end;self.Items[self:CurrentSelection()]:Selected(false)self.ActiveItem=1000000-1000000%#self.Items+tonumber(aK)if self:CurrentSelection()>self.Pagination.Max then self.Pagination.Min=self:CurrentSelection()-self.Pagination.Total;self.Pagination.Max=self:CurrentSelection()elseif self:CurrentSelection()<self.Pagination.Min then self.Pagination.Min=self:CurrentSelection()self.Pagination.Max=self:CurrentSelection()+self.Pagination.Total end else if#self.Items==0 then return 1 else if self.ActiveItem%#self.Items==0 then return 1 else return self.ActiveItem%#self.Items+1 end end end end;function UIMenu:CalculateWindowHeight()local s=0;for i=1,#self.Windows do s=s+self.Windows[i].Background:Size().Height end;return s end;function UIMenu:CalculateItemHeightOffset(Item)if Item.Base then return Item.Base.Rectangle.Height else return Item.Rectangle.Height end end;function UIMenu:CalculateItemHeight()local b0=0+self.Subtitle.ExtraY-37;for i=self.Pagination.Min+1,self.Pagination.Max do local Item=self.Items[i]if Item~=nil then b0=b0+self:CalculateItemHeightOffset(Item)end end;return b0 end;function UIMenu:RecalculateDescriptionPosition()local b1=self:CalculateWindowHeight()self.Description.Bar:Position(self.Position.X,149+self.Position.Y+b1)self.Description.Rectangle:Position(self.Position.X,149+self.Position.Y+b1)self.Description.Text:Position(self.Position.X+8,155+self.Position.Y+b1)self.Description.Bar:Size(431+self.WidthOffset,4)self.Description.Rectangle:Size(431+self.WidthOffset,30)self.Description.Bar:Position(self.Position.X,self:CalculateItemHeight()+(#self.Items>self.Pagination.Total+1 and 37 or 0)+self.Description.Bar:Position().Y)self.Description.Rectangle:Position(self.Position.X,self:CalculateItemHeight()+(#self.Items>self.Pagination.Total+1 and 37 or 0)+self.Description.Rectangle:Position().Y)self.Description.Text:Position(self.Position.X+8,self:CalculateItemHeight()+(#self.Items>self.Pagination.Total+1 and 37 or 0)+self.Description.Text:Position().Y)end;function UIMenu:CaclulatePanelPosition(b2)local s=self:CalculateWindowHeight()+149+self.Position.Y;if b2 then s=s+self.Description.Rectangle:Size().Height+5 end;return self:CalculateItemHeight()+(#self.Items>self.Pagination.Total+1 and 37 or 0)+s end;function UIMenu:AddWindow(b3)if b3()=="UIMenuWindow"then b3:SetParentMenu(self)b3:Offset(self.Position.X,self.Position.Y)table.insert(self.Windows,b3)self.ReDraw=true;self:RecalculateDescriptionPosition()end end;function UIMenu:RemoveWindowAt(ae)if tonumber(ae)then if self.Windows[ae]then table.remove(self.Windows,ae)self.ReDraw=true;self:RecalculateDescriptionPosition()end end end;function UIMenu:AddItem(Item)if Item()=="UIMenuItem"then local b4=self:CurrentSelection()Item:SetParentMenu(self)Item:Offset(self.Position.X,self.Position.Y)Item:Position(#self.Items*25-37+self.Subtitle.ExtraY)table.insert(self.Items,Item)self:RecalculateDescriptionPosition()self:CurrentSelection(b4)end end;function UIMenu:RemoveItemAt(ae)if tonumber(ae)then if self.Items[ae]then local b4=self:CurrentSelection()if#self.Items>self.Pagination.Total and self.Pagination.Max==#self.Items-1 then self.Pagination.Min=self.Pagination.Min-1;self.Pagination.Max=self.Pagination.Max+1 end;table.remove(self.Items,tonumber(ae))self:RecalculateDescriptionPosition()self:CurrentSelection(b4)end end end;function UIMenu:RefreshIndex()if#self.Items==0 then self.ActiveItem=1000;self.Pagination.Max=self.Pagination.Total+1;self.Pagination.Min=0;return end;self.Items[self:CurrentSelection()]:Selected(false)self.ActiveItem=1000-1000%#self.Items;self.Pagination.Max=self.Pagination.Total+1;self.Pagination.Min=0;self.ReDraw=true end;function UIMenu:Clear()self.Items={}self.ReDraw=true;self:RecalculateDescriptionPosition()end;function UIMenu:MultilineFormat(m)if tostring(m)then local b5=425+self.WidthOffset;local b6=0;local a1=""local b7=string.split(tostring(m)," ")for i=1,#b7 do local b8=MeasureStringWidth(b7[i],0,0.35)b6=b6+b8;if b6>b5 then a1=a1 .."\n"..b7[i].." "b6=b8+MeasureString(" ")else a1=a1 ..b7[i].." "b6=b6+MeasureString(" ")end end;return a1 end end;function UIMenu:DrawCalculations()local b1=self:CalculateWindowHeight()if self.Settings.MultilineFormats then if self.Subtitle.Rectangle and not self.Subtitle.Formatted then self.Subtitle.Formatted=true;self.Subtitle.Text:Text(self:MultilineFormat(self.Subtitle.Text:Text()))local b9=#string.split(self.Subtitle.Text:Text(),"\n")self.Subtitle.ExtraY=b9==1 and 37 or(b9+1)*22;self.Subtitle.Rectangle:Size(431+self.WidthOffset,self.Subtitle.ExtraY)end elseif self.Subtitle.Formatted then self.Subtitle.Formatted=false;self.Subtitle.ExtraY=37;self.Subtitle.Rectangle:Size(431+self.WidthOffset,self.Subtitle.ExtraY)self.Subtitle.Text:Text(self.Subtitle.BackupText)end;self.Background:Size(431+self.WidthOffset,self:CalculateItemHeight()+b1+(self.Subtitle.ExtraY>0 and 0 or 37))self.Extra.Up:Size(431+self.WidthOffset,18)self.Extra.Down:Size(431+self.WidthOffset,18)self.Extra.Up:Position(self.Position.X,144+self:CalculateItemHeight()+self.Position.Y+b1)self.Extra.Down:Position(self.Position.X,144+18+self:CalculateItemHeight()+self.Position.Y+b1)if self.WidthOffset>0 then self.ArrowSprite:Position(190+self.Position.X+self.WidthOffset/2,137+self:CalculateItemHeight()+self.Position.Y+b1)else self.ArrowSprite:Position(190+self.Position.X+self.WidthOffset,137+self:CalculateItemHeight()+self.Position.Y+b1)end;self.ReDraw=false;if#self.Items~=0 and self.Items[self:CurrentSelection()]:Description()~=""then self:RecalculateDescriptionPosition()local ba=self.Items[self:CurrentSelection()]:Description()if self.Settings.MultilineFormats then self.Description.Text:Text(self:MultilineFormat(ba))else self.Description.Text:Text(ba)end;local b9=#string.split(self.Description.Text:Text(),"\n")self.Description.Rectangle:Size(431+self.WidthOffset,b9==1 and 37 or(b9+1)*22)end end;function UIMenu:Visible(aa)if aa~=nil then self._Visible=tobool(aa)self.JustOpened=tobool(aa)self.Dirty=tobool(aa)self:UpdateScaleform()if self.ParentMenu~=nil or tobool(aa)==false then return end;if self.Settings.ResetCursorOnOpen then local b,c=GetScreenResolution()SetCursorLocation(b/2,c/2)SetCursorSprite(1)end else return self._Visible end end;function UIMenu:ProcessControl()if not self._Visible then return end;if self.JustOpened then self.JustOpened=false;return end;if self.Controls.Back.Enabled and(IsDisabledControlJustReleased(0,177)or IsDisabledControlJustReleased(1,177)or IsDisabledControlJustReleased(2,177)or IsDisabledControlJustReleased(0,199)or IsDisabledControlJustReleased(1,199)or IsDisabledControlJustReleased(2,199))then self:GoBack()end;if#self.Items==0 then return end;if not self.UpPressed then if self.Controls.Up.Enabled and(IsDisabledControlJustPressed(0,172)or IsDisabledControlJustPressed(1,172)or IsDisabledControlJustPressed(2,172)or IsDisabledControlJustPressed(0,241)or IsDisabledControlJustPressed(1,241)or IsDisabledControlJustPressed(2,241)or IsDisabledControlJustPressed(2,241))then Citizen.CreateThread(function()self.UpPressed=true;if#self.Items>self.Pagination.Total+1 then self:GoUpOverflow()else self:GoUp()end;self:UpdateScaleform()Citizen.Wait(175)while self.Controls.Up.Enabled and(IsDisabledControlPressed(0,172)or IsDisabledControlPressed(1,172)or IsDisabledControlPressed(2,172)or IsDisabledControlPressed(0,241)or IsDisabledControlPressed(1,241)or IsDisabledControlPressed(2,241)or IsDisabledControlPressed(2,241))do if#self.Items>self.Pagination.Total+1 then self:GoUpOverflow()else self:GoUp()end;self:UpdateScaleform()Citizen.Wait(125)end;self.UpPressed=false end)end end;if not self.DownPressed then if self.Controls.Down.Enabled and(IsDisabledControlJustPressed(0,173)or IsDisabledControlJustPressed(1,173)or IsDisabledControlJustPressed(2,173)or IsDisabledControlJustPressed(0,242)or IsDisabledControlJustPressed(1,242)or IsDisabledControlJustPressed(2,242))then Citizen.CreateThread(function()self.DownPressed=true;if#self.Items>self.Pagination.Total+1 then self:GoDownOverflow()else self:GoDown()end;self:UpdateScaleform()Citizen.Wait(175)while self.Controls.Down.Enabled and(IsDisabledControlPressed(0,173)or IsDisabledControlPressed(1,173)or IsDisabledControlPressed(2,173)or IsDisabledControlPressed(0,242)or IsDisabledControlPressed(1,242)or IsDisabledControlPressed(2,242))do if#self.Items>self.Pagination.Total+1 then self:GoDownOverflow()else self:GoDown()end;self:UpdateScaleform()Citizen.Wait(125)end;self.DownPressed=false end)end end;if not self.LeftPressed then if self.Controls.Left.Enabled and(IsDisabledControlJustPressed(0,174)or IsDisabledControlJustPressed(1,174)or IsDisabledControlJustPressed(2,174))then Citizen.CreateThread(function()self.LeftPressed=true;self:GoLeft()Citizen.Wait(175)while self.Controls.Left.Enabled and(IsDisabledControlPressed(0,174)or IsDisabledControlPressed(1,174)or IsDisabledControlPressed(2,174))do self:GoLeft()Citizen.Wait(125)end;self.LeftPressed=false end)end end;if not self.RightPressed then if self.Controls.Right.Enabled and(IsDisabledControlJustPressed(0,175)or IsDisabledControlJustPressed(1,175)or IsDisabledControlJustPressed(2,175))then Citizen.CreateThread(function()self.RightPressed=true;self:GoRight()Citizen.Wait(175)while self.Controls.Right.Enabled and(IsDisabledControlPressed(0,175)or IsDisabledControlPressed(1,175)or IsDisabledControlPressed(2,175))do self:GoRight()Citizen.Wait(125)end;self.RightPressed=false end)end end;if self.Controls.Select.Enabled and(IsDisabledControlJustPressed(0,201)or IsDisabledControlJustPressed(1,201)or IsDisabledControlJustPressed(2,201))then self:SelectItem()end end;function UIMenu:GoUpOverflow()if#self.Items<=self.Pagination.Total+1 then return end;if self:CurrentSelection()<=self.Pagination.Min+1 then if self:CurrentSelection()==1 then self.Pagination.Min=#self.Items-(self.Pagination.Total+1)self.Pagination.Max=#self.Items;self.Items[self:CurrentSelection()]:Selected(false)self.ActiveItem=1000-1000%#self.Items;self.ActiveItem=self.ActiveItem+#self.Items-1;self.Items[self:CurrentSelection()]:Selected(true)else self.Pagination.Min=self.Pagination.Min-1;self.Pagination.Max=self.Pagination.Max-1;self.Items[self:CurrentSelection()]:Selected(false)self.ActiveItem=self.ActiveItem-1;self.Items[self:CurrentSelection()]:Selected(true)end else self.Items[self:CurrentSelection()]:Selected(false)self.ActiveItem=self.ActiveItem-1;self.Items[self:CurrentSelection()]:Selected(true)end;PlaySoundFrontend(-1,self.Settings.Audio.UpDown,self.Settings.Audio.Library,true)self.OnIndexChange(self,self:CurrentSelection())self.ReDraw=true end;function UIMenu:GoUp()if#self.Items>self.Pagination.Total+1 then return end;self.Items[self:CurrentSelection()]:Selected(false)self.ActiveItem=self.ActiveItem-1;self.Items[self:CurrentSelection()]:Selected(true)PlaySoundFrontend(-1,self.Settings.Audio.UpDown,self.Settings.Audio.Library,true)self.OnIndexChange(self,self:CurrentSelection())self.ReDraw=true end;function UIMenu:GoDownOverflow()if#self.Items<=self.Pagination.Total+1 then return end;if self:CurrentSelection()>=self.Pagination.Max then if self:CurrentSelection()==#self.Items then self.Pagination.Min=0;self.Pagination.Max=self.Pagination.Total+1;self.Items[self:CurrentSelection()]:Selected(false)self.ActiveItem=1000-1000%#self.Items;self.Items[self:CurrentSelection()]:Selected(true)else self.Pagination.Max=self.Pagination.Max+1;self.Pagination.Min=self.Pagination.Max-(self.Pagination.Total+1)self.Items[self:CurrentSelection()]:Selected(false)self.ActiveItem=self.ActiveItem+1;self.Items[self:CurrentSelection()]:Selected(true)end else self.Items[self:CurrentSelection()]:Selected(false)self.ActiveItem=self.ActiveItem+1;self.Items[self:CurrentSelection()]:Selected(true)end;PlaySoundFrontend(-1,self.Settings.Audio.UpDown,self.Settings.Audio.Library,true)self.OnIndexChange(self,self:CurrentSelection())self.ReDraw=true end;function UIMenu:GoDown()if#self.Items>self.Pagination.Total+1 then return end;self.Items[self:CurrentSelection()]:Selected(false)self.ActiveItem=self.ActiveItem+1;self.Items[self:CurrentSelection()]:Selected(true)PlaySoundFrontend(-1,self.Settings.Audio.UpDown,self.Settings.Audio.Library,true)self.OnIndexChange(self,self:CurrentSelection())self.ReDraw=true end;function UIMenu:GoLeft()local type,bb=self.Items[self:CurrentSelection()]()if bb~="UIMenuListItem"and bb~="UIMenuSliderItem"and bb~="UIMenuProgressItem"then return end;if not self.Items[self:CurrentSelection()]:Enabled()then PlaySoundFrontend(-1,self.Settings.Audio.Error,self.Settings.Audio.Library,true)return end;if bb=="UIMenuListItem"then local Item=self.Items[self:CurrentSelection()]Item:Index(Item._Index-1)self.OnListChange(self,Item,Item._Index)Item.OnListChanged(self,Item,Item._Index)PlaySoundFrontend(-1,self.Settings.Audio.LeftRight,self.Settings.Audio.Library,true)elseif bb=="UIMenuSliderItem"then local Item=self.Items[self:CurrentSelection()]Item:Index(Item._Index-1)self.OnSliderChange(self,Item,Item:Index())Item.OnSliderChanged(self,Item,Item._Index)PlaySoundFrontend(-1,self.Settings.Audio.LeftRight,self.Settings.Audio.Library,true)elseif bb=="UIMenuProgressItem"then local Item=self.Items[self:CurrentSelection()]Item:Index(Item.Data.Index-1)self.OnProgressChange(self,Item,Item.Data.Index)Item.OnProgressChanged(self,Item,Item.Data.Index)PlaySoundFrontend(-1,self.Settings.Audio.LeftRight,self.Settings.Audio.Library,true)end end;function UIMenu:GoRight()local type,bb=self.Items[self:CurrentSelection()]()if bb~="UIMenuListItem"and bb~="UIMenuSliderItem"and bb~="UIMenuProgressItem"then return end;if not self.Items[self:CurrentSelection()]:Enabled()then PlaySoundFrontend(-1,self.Settings.Audio.Error,self.Settings.Audio.Library,true)return end;if bb=="UIMenuListItem"then local Item=self.Items[self:CurrentSelection()]Item:Index(Item._Index+1)self.OnListChange(self,Item,Item._Index)Item.OnListChanged(self,Item,Item._Index)PlaySoundFrontend(-1,self.Settings.Audio.LeftRight,self.Settings.Audio.Library,true)elseif bb=="UIMenuSliderItem"then local Item=self.Items[self:CurrentSelection()]Item:Index(Item._Index+1)self.OnSliderChange(self,Item,Item:Index())Item.OnSliderChanged(self,Item,Item._Index)PlaySoundFrontend(-1,self.Settings.Audio.LeftRight,self.Settings.Audio.Library,true)elseif bb=="UIMenuProgressItem"then local Item=self.Items[self:CurrentSelection()]Item:Index(Item.Data.Index+1)self.OnProgressChange(self,Item,Item.Data.Index)Item.OnProgressChanged(self,Item,Item.Data.Index)PlaySoundFrontend(-1,self.Settings.Audio.LeftRight,self.Settings.Audio.Library,true)end end;function UIMenu:SelectItem()if not self.Items[self:CurrentSelection()]:Enabled()then PlaySoundFrontend(-1,self.Settings.Audio.Error,self.Settings.Audio.Library,true)return end;local Item=self.Items[self:CurrentSelection()]local type,bb=Item()if bb=="UIMenuCheckboxItem"then Item.Checked=not Item.Checked;PlaySoundFrontend(-1,self.Settings.Audio.Select,self.Settings.Audio.Library,true)self.OnCheckboxChange(self,Item,Item.Checked)Item.CheckboxEvent(self,Item,Item.Checked)elseif bb=="UIMenuListItem"then PlaySoundFrontend(-1,self.Settings.Audio.Select,self.Settings.Audio.Library,true)self.OnListSelect(self,Item,Item._Index)Item.OnListSelected(self,Item,Item._Index)elseif bb=="UIMenuSliderItem"then PlaySoundFrontend(-1,self.Settings.Audio.Select,self.Settings.Audio.Library,true)self.OnSliderSelect(self,Item,Item._Index)Item.OnSliderSelected(Item._Index)elseif bb=="UIMenuProgressItem"then PlaySoundFrontend(-1,self.Settings.Audio.Select,self.Settings.Audio.Library,true)self.OnProgressSelect(self,Item,Item.Data.Index)Item.OnProgressSelected(Item.Data.Index)else PlaySoundFrontend(-1,self.Settings.Audio.Select,self.Settings.Audio.Library,true)self.OnItemSelect(self,Item,self:CurrentSelection())Item.Activated(self,Item)if not self.Children[Item]then return end;self:Visible(false)self.Children[Item]:Visible(true)self.OnMenuChanged(self,self.Children[self.Items[self:CurrentSelection()]],true)end end;function UIMenu:GoBack()PlaySoundFrontend(-1,self.Settings.Audio.Back,self.Settings.Audio.Library,true)self:Visible(false)if self.ParentMenu~=nil then self.ParentMenu:Visible(true)self.OnMenuChanged(self,self.ParentMenu,false)if self.Settings.ResetCursorOnOpen then local b,c=GetActiveScreenResolution()SetCursorLocation(b/2,c/2)end end;self.OnMenuClosed(self)end;function UIMenu:BindMenuToItem(a9,Item)if a9()=="UIMenu"and Item()=="UIMenuItem"then a9.ParentMenu=self;a9.ParentItem=Item;self.Children[Item]=a9 end end;function UIMenu:ReleaseMenuFromItem(Item)if Item()=="UIMenuItem"then if not self.Children[Item]then return false end;self.Children[Item].ParentMenu=nil;self.Children[Item].ParentItem=nil;self.Children[Item]=nil;return true end end;function UIMenu:Draw()if not self._Visible then return end;HideHudComponentThisFrame(19)if self.Settings.ControlDisablingEnabled then self:DisEnableControls(false)end;if self.Settings.InstructionalButtons then DrawScaleformMovieFullscreen(self.InstructionalScaleform,255,255,255,255,0)end;if self.Settings.ScaleWithSafezone then ScreenDrawPositionBegin(76,84)ScreenDrawPositionRatio(0,0,0,0)end;if self.ReDraw then self:DrawCalculations()end;if self.Logo then self.Logo:Draw()elseif self.Banner then self.Banner:Draw()end;self.Title:Draw()if self.Subtitle.Rectangle then self.Subtitle.Rectangle:Draw()self.Subtitle.Text:Draw()end;if#self.Items~=0 or#self.Windows~=0 then self.Background:Draw()end;if#self.Windows~=0 then local bc=0;for aW=1,#self.Windows do if self.Windows[aW-1]then bc=bc+self.Windows[aW-1].Background:Size().Height end;local b3=self.Windows[aW]b3:Position(bc+self.Subtitle.ExtraY-37)b3:Draw()end end;if#self.Items==0 then if self.Settings.ScaleWithSafezone then ScreenDrawPositionEnd()end;return end;local aM=self:CurrentSelection()self.Items[aM]:Selected(true)if self.Items[aM]:Description()~=""then self.Description.Bar:Draw()self.Description.Rectangle:Draw()self.Description.Text:Draw()end;if self.Items[aM].Panels~=nil then if#self.Items[aM].Panels~=0 then local bd=self:CaclulatePanelPosition(self.Items[aM]:Description()~="")for aW=1,#self.Items[aM].Panels do if self.Items[aM].Panels[aW-1]then bd=bd+self.Items[aM].Panels[aW-1].Background:Size().Height+5 end;self.Items[aM].Panels[aW]:Position(bd)self.Items[aM].Panels[aW]:Draw()end end end;local b1=self:CalculateWindowHeight()if#self.Items<=self.Pagination.Total+1 then local b0=self.Subtitle.ExtraY-37+b1;for aW=1,#self.Items do Item=self.Items[aW]Item:Position(b0)Item:Draw()b0=b0+self:CalculateItemHeightOffset(Item)end else local b0=self.Subtitle.ExtraY-37+b1;for aW=self.Pagination.Min+1,self.Pagination.Max,1 do if self.Items[aW]then Item=self.Items[aW]Item:Position(b0)Item:Draw()b0=b0+self:CalculateItemHeightOffset(Item)end end;self.Extra.Up:Draw()self.Extra.Down:Draw()self.ArrowSprite:Draw()if self.PageCounter.Text~=nil then local be=self.PageCounter.PreText..aM.." / "..#self.Items;self.PageCounter.Text:Text(be)self.PageCounter.Text:Draw()end end;if self.Settings.ScaleWithSafezone then ScreenDrawPositionEnd()end end;function UIMenu:ProcessMouse()if not self._Visible or self.JustOpened or#self.Items==0 or tobool(Controller())or not self.Settings.MouseControlsEnabled then EnableControlAction(0,2,true)EnableControlAction(0,1,true)EnableControlAction(0,25,true)EnableControlAction(0,24,true)if self.Dirty then for _,Item in pairs(self.Items)do if Item:Hovered()then Item:Hovered(false)end end end;return end;local aF={X=0,Y=0}local b1=self:CalculateWindowHeight()if self.Settings.ScaleWithSafezone then aF=GetSafeZoneBounds()end;local bf=#self.Items;local b0=0;ShowCursorThisFrame()if#self.Items>self.Pagination.Total+1 then bf=self.Pagination.Max end;if IsMouseInBounds(0,0,30,1080)and self.Settings.MouseEdgeEnabled then SetGameplayCamRelativeHeading(GetGameplayCamRelativeHeading()+5)SetCursorSprite(6)elseif IsMouseInBounds(1920-30,0,30,1080)and self.Settings.MouseEdgeEnabled then SetGameplayCamRelativeHeading(GetGameplayCamRelativeHeading()-5)SetCursorSprite(7)elseif self.Settings.MouseEdgeEnabled then SetCursorSprite(1)end;for i=self.Pagination.Min+1,bf,1 do local p,q=self.Position.X+aF.X,self.Position.Y+144-37+self.Subtitle.ExtraY+b0+aF.Y+b1;local Item=self.Items[i]local bg,bh=Item()local r,s=431+self.WidthOffset,self:CalculateItemHeightOffset(Item)if IsMouseInBounds(p,q,r,s)then Item:Hovered(true)if not self.Controls.MousePressed then if IsDisabledControlJustPressed(0,24)then Citizen.CreateThread(function()local bi,bj,bk,bl=p,q,r,s;self.Controls.MousePressed=true;if Item:Selected()and Item:Enabled()then if bh=="UIMenuListItem"then if IsMouseInBounds(Item.LeftArrow.X+aF.X,Item.LeftArrow.Y+aF.Y,Item.LeftArrow.Width,Item.LeftArrow.Height)then self:GoLeft()elseif not IsMouseInBounds(Item.RightArrow.X+aF.X,Item.RightArrow.Y+aF.Y,Item.RightArrow.Width,Item.RightArrow.Height)then self:SelectItem()end;if IsMouseInBounds(Item.RightArrow.X+aF.X,Item.RightArrow.Y+aF.Y,Item.RightArrow.Width,Item.RightArrow.Height)then self:GoRight()elseif not IsMouseInBounds(Item.LeftArrow.X+aF.X,Item.LeftArrow.Y+aF.Y,Item.LeftArrow.Width,Item.LeftArrow.Height)then self:SelectItem()end elseif bh=="UIMenuSliderItem"then if IsMouseInBounds(Item.LeftArrow.X+aF.X,Item.LeftArrow.Y+aF.Y,Item.LeftArrow.Width,Item.LeftArrow.Height)then self:GoLeft()elseif not IsMouseInBounds(Item.RightArrow.X+aF.X,Item.RightArrow.Y+aF.Y,Item.RightArrow.Width,Item.RightArrow.Height)then self:SelectItem()end;if IsMouseInBounds(Item.RightArrow.X+aF.X,Item.RightArrow.Y+aF.Y,Item.RightArrow.Width,Item.RightArrow.Height)then self:GoRight()elseif not IsMouseInBounds(Item.LeftArrow.X+aF.X,Item.LeftArrow.Y+aF.Y,Item.LeftArrow.Width,Item.LeftArrow.Height)then self:SelectItem()end elseif bh=="UIMenuProgressItem"then if IsMouseInBounds(Item.Bar.X+aF.X,Item.Bar.Y+aF.Y-12,Item.Data.Max,Item.Bar.Height+24)then Item:CalculateProgress(math.round(GetControlNormal(0,239)*1920)-aF.X)self.OnProgressChange(self,Item,Item.Data.Index)Item.OnProgressChanged(self,Item,Item.Data.Index)else self:SelectItem()end else self:SelectItem()end elseif not Item:Selected()then self:CurrentSelection(i-1)PlaySoundFrontend(-1,self.Settings.Audio.Error,self.Settings.Audio.Library,true)self.OnIndexChange(self,self:CurrentSelection())self.ReDraw=true;self:UpdateScaleform()elseif not Item:Enabled()and Item:Selected()then PlaySoundFrontend(-1,self.Settings.Audio.Error,self.Settings.Audio.Library,true)end;Citizen.Wait(175)while IsDisabledControlPressed(0,24)and IsMouseInBounds(bi,bj,bk,bl)do if Item:Selected()and Item:Enabled()then if bh=="UIMenuListItem"then if IsMouseInBounds(Item.LeftArrow.X+aF.X,Item.LeftArrow.Y+aF.Y,Item.LeftArrow.Width,Item.LeftArrow.Height)then self:GoLeft()end;if IsMouseInBounds(Item.RightArrow.X+aF.X,Item.RightArrow.Y+aF.Y,Item.RightArrow.Width,Item.RightArrow.Height)then self:GoRight()end elseif bh=="UIMenuSliderItem"then if IsMouseInBounds(Item.LeftArrow.X+aF.X,Item.LeftArrow.Y+aF.Y,Item.LeftArrow.Width,Item.LeftArrow.Height)then self:GoLeft()end;if IsMouseInBounds(Item.RightArrow.X+aF.X,Item.RightArrow.Y+aF.Y,Item.RightArrow.Width,Item.RightArrow.Height)then self:GoRight()end elseif bh=="UIMenuProgressItem"then if IsMouseInBounds(Item.Bar.X+aF.X,Item.Bar.Y+aF.Y-12,Item.Data.Max,Item.Bar.Height+24)then Item:CalculateProgress(math.round(GetControlNormal(0,239)*1920)-aF.X)self.OnProgressChange(self,Item,Item.Data.Index)Item.OnProgressChanged(self,Item,Item.Data.Index)else self:SelectItem()end end elseif not Item:Selected()then self:CurrentSelection(i-1)PlaySoundFrontend(-1,self.Settings.Audio.Error,self.Settings.Audio.Library,true)self.OnIndexChange(self,self:CurrentSelection())self.ReDraw=true;self:UpdateScaleform()elseif not Item:Enabled()and Item:Selected()then PlaySoundFrontend(-1,self.Settings.Audio.Error,self.Settings.Audio.Library,true)end;Citizen.Wait(125)end;self.Controls.MousePressed=false end)end end else Item:Hovered(false)end;b0=b0+self:CalculateItemHeightOffset(Item)end;local bm,bn=self.Position.X+aF.X,144+self:CalculateItemHeight()+self.Position.Y+aF.Y+b1;if#self.Items<=self.Pagination.Total+1 then return end;if IsMouseInBounds(bm,bn,431+self.WidthOffset,18)then self.Extra.Up:Colour(30,30,30,255)if not self.Controls.MousePressed then if IsDisabledControlJustPressed(0,24)then Citizen.CreateThread(function()local bo,bp=bm,bn;self.Controls.MousePressed=true;if#self.Items>self.Pagination.Total+1 then self:GoUpOverflow()else self:GoUp()end;Citizen.Wait(175)while IsDisabledControlPressed(0,24)and IsMouseInBounds(bo,bp,431+self.WidthOffset,18)do if#self.Items>self.Pagination.Total+1 then self:GoUpOverflow()else self:GoUp()end;Citizen.Wait(125)end;self.Controls.MousePressed=false end)end end else self.Extra.Up:Colour(0,0,0,200)end;if IsMouseInBounds(bm,bn+18,431+self.WidthOffset,18)then self.Extra.Down:Colour(30,30,30,255)if not self.Controls.MousePressed then if IsDisabledControlJustPressed(0,24)then Citizen.CreateThread(function()local bo,bp=bm,bn;self.Controls.MousePressed=true;if#self.Items>self.Pagination.Total+1 then self:GoDownOverflow()else self:GoDown()end;Citizen.Wait(175)while IsDisabledControlPressed(0,24)and IsMouseInBounds(bo,bp+18,431+self.WidthOffset,18)do if#self.Items>self.Pagination.Total+1 then self:GoDownOverflow()else self:GoDown()end;Citizen.Wait(125)end;self.Controls.MousePressed=false end)end end else self.Extra.Down:Colour(0,0,0,200)end end;function UIMenu:AddInstructionButton(bq)if type(bq)=="table"and#bq==2 then table.insert(self.InstructionalButtons,bq)end end;function UIMenu:RemoveInstructionButton(bq)if type(bq)=="table"then for i=1,#self.InstructionalButtons do if bq==self.InstructionalButtons[i]then table.remove(self.InstructionalButtons,i)break end end else if tonumber(bq)then if self.InstructionalButtons[tonumber(bq)]then table.remove(self.InstructionalButtons,tonumber(bq))end end end end;function UIMenu:AddEnabledControl(br,bs,Controller)if tonumber(br)and tonumber(bs)then table.insert(self.Settings.EnabledControls[Controller and"Controller"or"Keyboard"],{br,bs})end end;function UIMenu:RemoveEnabledControl(br,bs,Controller)local bg=Controller and"Controller"or"Keyboard"for ae=1,#self.Settings.EnabledControls[bg]do if br==self.Settings.EnabledControls[bg][ae][1]and bs==self.Settings.EnabledControls[bg][ae][2]then table.remove(self.Settings.EnabledControls[bg],ae)break end end end;function UIMenu:UpdateScaleform()if not self._Visible or not self.Settings.InstructionalButtons then return end;PushScaleformMovieFunction(self.InstructionalScaleform,"CLEAR_ALL")PopScaleformMovieFunction()PushScaleformMovieFunction(self.InstructionalScaleform,"TOGGLE_MOUSE_BUTTONS")PushScaleformMovieFunctionParameterInt(0)PopScaleformMovieFunction()PushScaleformMovieFunction(self.InstructionalScaleform,"CREATE_CONTAINER")PopScaleformMovieFunction()PushScaleformMovieFunction(self.InstructionalScaleform,"SET_DATA_SLOT")PushScaleformMovieFunctionParameterInt(0)PushScaleformMovieFunctionParameterString(GetControlInstructionalButton(2,176,0))PushScaleformMovieFunctionParameterString("Select")PopScaleformMovieFunction()if self.Controls.Back.Enabled then PushScaleformMovieFunction(self.InstructionalScaleform,"SET_DATA_SLOT")PushScaleformMovieFunctionParameterInt(1)PushScaleformMovieFunctionParameterString(GetControlInstructionalButton(2,177,0))PushScaleformMovieFunctionParameterString("Back")PopScaleformMovieFunction()end;local bt=2;for i=1,#self.InstructionalButtons do if self.InstructionalButtons[i]then if#self.InstructionalButtons[i]==2 then PushScaleformMovieFunction(self.InstructionalScaleform,"SET_DATA_SLOT")PushScaleformMovieFunctionParameterInt(bt)PushScaleformMovieFunctionParameterString(self.InstructionalButtons[i][1])PushScaleformMovieFunctionParameterString(self.InstructionalButtons[i][2])PopScaleformMovieFunction()bt=bt+1 end end end;PushScaleformMovieFunction(self.InstructionalScaleform,"DRAW_INSTRUCTIONAL_BUTTONS")PushScaleformMovieFunctionParameterInt(-1)PopScaleformMovieFunction()end;function MenuPool.New()local bu={Menus={}}return setmetatable(bu,MenuPool)end;function MenuPool:AddSubMenu(a9,P,a3,bv,bw)if a9()=="UIMenu"then local Item=UIMenuItem.New(tostring(P),a3 or"")a9:AddItem(Item)local bx;if bv then bx=UIMenu.New(a9.Title:Text(),P,a9.Position.X,a9.Position.Y)else bx=UIMenu.New(a9.Title:Text(),P)end;if bw then if a9.Logo~=nil then bx.Logo=a9.Logo else bx.Logo=nil;bx.Banner=a9.Banner end end;self:Add(bx)a9:BindMenuToItem(bx,Item)return bx end end;function MenuPool:Add(a9)if a9()=="UIMenu"then table.insert(self.Menus,a9)end end;function MenuPool:Clear()self={Menus={}}end;function MenuPool:Remove()self=nil end;function MenuPool:MouseEdgeEnabled(aa)if aa~=nil then for _,a9 in pairs(self.Menus)do a9.Settings.MouseEdgeEnabled=tobool(aa)end end end;function MenuPool:ControlDisablingEnabled(aa)if aa~=nil then for _,a9 in pairs(self.Menus)do a9.Settings.ControlDisablingEnabled=tobool(aa)end end end;function MenuPool:ResetCursorOnOpen(aa)if aa~=nil then for _,a9 in pairs(self.Menus)do a9.Settings.ResetCursorOnOpen=tobool(aa)end end end;function MenuPool:MultilineFormats(aa)if aa~=nil then for _,a9 in pairs(self.Menus)do a9.Settings.MultilineFormats=tobool(aa)end end end;function MenuPool:Audio(by,bz)if by~=nil and bz~=nil then for _,a9 in pairs(self.Menus)do if a9.Settings.Audio[by]then a9.Settings.Audio[by]=bz end end end end;function MenuPool:WidthOffset(b8)if tonumber(b8)then for _,a9 in pairs(self.Menus)do a9:SetMenuWidthOffset(tonumber(b8))end end end;function MenuPool:CounterPreText(m)if m~=nil then for _,a9 in pairs(self.Menus)do a9.PageCounter.PreText=tostring(m)end end end;function MenuPool:DisableInstructionalButtons(aa)if aa~=nil then for _,a9 in pairs(self.Menus)do a9.Settings.InstructionalButtons=tobool(aa)end end end;function MenuPool:MouseControlsEnabled(aa)if aa~=nil then for _,a9 in pairs(self.Menus)do a9.Settings.MouseControlsEnabled=tobool(aa)end end end;function MenuPool:RefreshIndex()for _,a9 in pairs(self.Menus)do a9:RefreshIndex()end end;function MenuPool:ProcessMenus()self:ProcessControl()self:ProcessMouse()self:Draw()end;function MenuPool:ProcessControl()for _,a9 in pairs(self.Menus)do if a9:Visible()then a9:ProcessControl()end end end;function MenuPool:ProcessMouse()for _,a9 in pairs(self.Menus)do if a9:Visible()then a9:ProcessMouse()end end end;function MenuPool:Draw()for _,a9 in pairs(self.Menus)do if a9:Visible()then a9:Draw()end end end;function MenuPool:IsAnyMenuOpen()local bA=false;for _,a9 in pairs(self.Menus)do if a9:Visible()then bA=true;break end end;return bA end;function MenuPool:CloseAllMenus()for _,a9 in pairs(self.Menus)do if a9:Visible()then a9:Visible(false)a9.OnMenuClosed(a9)end end end;function MenuPool:SetBannerSprite(Sprite)if Sprite()=="Sprite"then for _,a9 in pairs(self.Menus)do a9:SetBannerSprite(Sprite)end end end;function MenuPool:SetBannerRectangle(a_)if a_()=="Rectangle"then for _,a9 in pairs(self.Menus)do a9:SetBannerRectangle(a_)end end end;function MenuPool:TotalItemsPerPage(d)if tonumber(d)then for _,a9 in pairs(self.Menus)do a9.Pagination.Total=d-1 end end end;function NativeUI.CreatePool()return MenuPool.New()end;function NativeUI.CreateMenu(aJ,aR,p,q,X,Y)return UIMenu.New(aJ,aR,p,q,X,Y)end;function NativeUI.CreateItem(P,a3)return UIMenuItem.New(P,a3)end;function NativeUI.CreateColouredItem(P,a3,ab,ac)return UIMenuColouredItem.New(P,a3,ab,ac)end;function NativeUI.CreateCheckboxItem(P,af,a3)return UIMenuCheckboxItem.New(P,af,a3)end;function NativeUI.CreateListItem(P,ai,ae,a3)return UIMenuListItem.New(P,ai,ae,a3)end;function NativeUI.CreateSliderItem(P,ai,ae,a3,am)return UIMenuSliderItem.New(P,ai,ae,a3,am)end;function NativeUI.CreateProgressItem(P,ai,ae,a3,ap)return UIMenuProgressItem.New(P,ai,ae,a3,ap)end;function NativeUI.CreateHeritageWindow(at,au)return UIMenuHeritageWindow.New(at,au)end;function NativeUI.CreateGridPanel(av,aw,ax,ay)return UIMenuGridPanel.New(av,aw,ax,ay)end;function NativeUI.CreateColourPanel(aJ,Colours)return UIMenuColourPanel.New(aJ,Colours)end;function NativeUI.CreatePercentagePanel(aN,aO)return UIMenuPercentagePanel.New(aN,aO)end;function NativeUI.CreateSprite(X,Y,p,q,r,s,Z,w,x,y,z)return Sprite.New(X,Y,p,q,r,s,Z,w,x,y,z)end;function NativeUI.CreateRectangle(p,q,r,s,w,x,y,z)return UIResRectangle.New(p,q,r,s,w,x,y,z)end;function NativeUI.CreateText(P,p,q,Q,w,x,y,z,R,S,T,U,V)return UIResText.New(P,p,q,Q,w,x,y,z,R,S,T,U,V)end